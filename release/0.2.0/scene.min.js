!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scene",[],e):"object"==typeof exports?exports.Scene=e():t.Scene=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=10)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+e;return t?function(){return this[t][r]}:function(){return this[r]}},o=function(t,e){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+e;return t?function(e){return this[t][r]=e,this}:function(t){return this[r]=t,this}},a=(e.isUndefined=function(t){return void 0===t},e.isObject=function(t){return"object"===(void 0===t?"undefined":n(t))},e.isArray=function(t){return Array.isArray(t)},e.isString=function(t){return"string"==typeof t},e.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.splitUnit=function(t){var e=""+t;try{var r=e.match(/([0-9]|\.|-|e-|e\+)+/g,"")[0];return{unit:e.replace(r,"")||"",value:r=parseFloat(r)}}catch(t){return{unit:e}}},e.camelize=function(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})},e.defineProperty=function(t,e,r){Object.defineProperty(t,e,r)});e.defineGetter=function(t){var e=t.target,r=t.name,n=t.parent,o=t.prefix;a(e,r,{get:i(n,r,o)})},e.defineSetter=function(t){var e=t.target,r=t.name,n=t.parent,i=t.prefix;a(e,r,{set:o(n,r,i)})},e.defineGetterSetter=function(t){var e=t.target,r=t.name,n=t.parent,u=t.prefix;a(e,r,{get:i(n,r,u),set:o(n,r,u)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EASE_IN_OUT=e.EASE_OUT=e.EASE_IN=e.EASE=e.PLAY_DIRECTION=e.FILL_MODE=e.ANIMATION_PLAY_STATE=e.SCENE_ROLES=e.PROPERTY=e.PREFIX=void 0;var n,i=r(3),o=(n=i)&&n.__esModule?n:{default:n};e.PREFIX="__SCENEJS_";var a=e.PROPERTY="property";e.SCENE_ROLES=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},a,!0),e.ANIMATION_PLAY_STATE=["idle","pending","paused","running","finished"],e.FILL_MODE=["none","forwards","backwards","both","auto"],e.PLAY_DIRECTION=["normal","reverse","alternate","alternate-reverse"],e.EASE=(0,o.default)(.25,.1,.25,1),e.EASE_IN=(0,o.default)(.42,0,1,1),e.EASE_OUT=(0,o.default)(0,0,.58,1),e.EASE_IN_OUT=(0,o.default)(.42,0,.58,1)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);var o=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",this.init(e,r)}return n(t,[{key:"init",value:function(t,e){var r=void 0;if((0,i.isObject)(e))for(r in e)this[r]=e[r];else this.separator=e;(0,i.isString)(t)?this.value=t.split(this.separator):(0,i.isObject)(t)?this.value=t:this.value=[t]}},{key:"get",value:function(t){return this.value[t]}},{key:"set",value:function(t,e){return this.value[t]=e,this}},{key:"clone",value:function(){var e=[],r=this.value,n="",i=void 0;for(i in r)n=r[i],e.push(n instanceof t?n.clone():n);return new t(e,{separator:this.separator,prefix:this.prefix,suffix:this.suffix,model:this.model,type:this.type})}},{key:"toValue",value:function(){return this.prefix+this.join()+this.suffix}},{key:"join",value:function(){var e=[],r=this.value,n=this.separator,i="",o=void 0;for(o in r)i=r[o],e.push(i instanceof t?i.toValue():i);return e.join(n)}},{key:"each",value:function(t){var e=this.value;for(var r in e)t(e[r],r,e)}},{key:"multiply",value:function(e){var r=this.value;for(var n in r)r[n]instanceof t?r[n].multiply(e):r[n]*=e}},{key:"length",get:function(){var t=this.value;if((0,i.has)(t,"length"))return t.length;var e=0,r=void 0;for(r in t)(0,i.has)(t,r)&&++e;return e}}]),t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,n){function i(t,e,r){var n=1-r;return r*r*r+3*r*r*n*e+3*r*n*n*t}var o=function(o){var a=o;return a>=1?a=1:a<=0&&(a=0),a=function(e){for(var n=e,o=1;Math.abs(o)>.001;){if(o=i(t,r,n)-e,Math.abs(o)<.001)return n;n-=o/2}return n}(a),i(e,n,a)};return o.easingName="cubic-bezier("+t+", "+e+", "+r+", "+n+")",o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=a(r(13)),o=a(r(3));function a(t){return t&&t.__esModule?t:{default:t}}var u=0,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var e=Date.now(),r=Math.max(0,16-(e-u)),n=window.setTimeout(function(){t(e+r)},1e3/60);return u=e+r,n},f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._timer=0,r.options={},r.state={easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:"none",playSpeed:1,currentTime:0,currentIterationTime:-1,prevTime:0,playState:"paused"},r.setOptions(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"setEasing",value:function(t){Array.isArray(t)?(this.state.easingName="cubic-bezier("+t.join(" ,")+")",this.state.easing=o.default.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t))):(this.state.easing=t,this.state.easingName=t.easingName||"linear")}},{key:"getEasing",value:function(){return this.state.easing}},{key:"setOptions",value:function(t){if(!t)return this;var e=void 0;for(e in t)"easing"!==e?(e in this.state?this.state:this.options)[e]=t[e]:this.setEasing(t[e]);return this}},{key:"setPlaySpeed",value:function(t){this.state.playSpeed=t}},{key:"getTotalDuration",value:function(){return"infinite"===this.state.iterationCount?1/0:this.state.delay+this.getActiveDuration()}},{key:"getActiveDuration",value:function(){return"infinite"===this.state.iterationCount?1/0:this.getDuration()*this.state.iterationCount}},{key:"isEnded",value:function(){return 0===this.getTime()&&"paused"===this.playState||!(this.getTime()<this.getTotalDuration())}},{key:"isPaused",value:function(){return"paused"===this.playState}},{key:"setNext",value:function(t){this.on("ended",function(){t.play()})}},{key:"play",value:function(){var t=this;return this.isEnded()&&this.setTime(0),this.playState="running",s(function(e){t.state.prevTime=e,t.tick(e)}),this.trigger("play"),this}},{key:"pause",value:function(){return this.playState="paused",this.trigger("paused"),this}},{key:"stop",value:function(){return this.playState="paused",this.trigger("paused"),this.trigger("ended"),this}},{key:"reset",value:function(){return this.setTime(0),this.stop(),this}},{key:"setTime",value:function(t){var e=this.getTotalDuration(),r=t;r<0?r=0:r>e&&(r=e),this.state.currentTime=r,this.calculateIterationTime(),this.trigger("timeupdate",{currentTime:r})}},{key:"getTime",value:function(){return this.state.currentTime}},{key:"calculateIterationTime",value:function(){var t=this.state,e=t.currentTime,r=t.iterationCount,n=t.fillMode,i=t.direction,o=t.delay,a=this.getDuration(),u=parseInt(1e4*Math.max(e-o,0),10)/1e4,s=0===a?0:u/a,f=s%2>=1,l=u%a,c=!1;switch(i){case"reverse":l=a-l;break;case"alternate":f&&(l=a-l),c=!0;break;case"alternate-reverse":f||(l=a-l),c=!0}switch(n){case"both":case"forwards":if(c||s!==r||r%1!=0)break;l=a-l;break;default:if(s!==r||r%1!=0)break;l=0}this.setIterationTime(l)}},{key:"caculateEasing",value:function(t){if(!this.state.easing)return t;var e=this.getDuration();return(0,this.state.easing)(0===e?0:t/e)*t}},{key:"getIterationTime",value:function(){return this.state.currentIterationTime}},{key:"setIterationTime",value:function(t){var e=t;return this.state.currentIterationTime=e,this.trigger("iterationtimeupdate",{iterationTime:e}),this}},{key:"tick",value:function(t){var e=this,r=this.state.prevTime,n=this.getTime()+Math.min(1e3,t-r)/1e3;this.state.prevTime=t,this.setTime(n),this.isEnded()&&this.stop(),"paused"!==this.playState&&s(function(t){e.tick(t)})}}]),e}();e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=f(r(4)),o=f(r(6)),a=r(0),u=f(r(15)),s=r(17);function f(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.timeline=new u.default,n.load(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"getDuration",value:function(){return this.timeline.last}},{key:"setDuration",value:function(t){var e=t/this.getDuration(),r=this.timeline,n=r.times,i=r.items,o={};r.times=n.map(function(t){var r=t*e;return o[r]=i[t],r}),r.items=o}},{key:"setId",value:function(t){this.options.id=t}},{key:"set",value:function(t,e,r,n){var i=this;if((0,a.isArray)(t))return t.forEach(function(t){i.set(t,e,r,n)}),this;if((0,a.isObject)(t))return this.load(t),this;var o=this.getFrame(t)||this.newFrame(t);return o.set(e,r,n),this.updateFrame(o),this}},{key:"get",value:function(t,e,r){var n=this.getFrame(t);return n&&n.get(e,r)}},{key:"remove",value:function(t,e,r){var n=this.getFrame(t);return n&&n.remove(e,r),this}},{key:"setIterationTime",value:function(t){(function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setIterationTime",this).call(this,t);var r=this.getIterationTime();return this.getNowFrame(r)?(this.trigger("animate",{time:r,frame:this.getNowFrame(r),currentTime:this.getTime()}),this):this}},{key:"update",value:function(){return this.timeline.update(),this}},{key:"updateFrame",value:function(t){return this.timeline.updateFrame(t),this}},{key:"newFrame",value:function(t){var e=this.getFrame(t);return e||(e=new o.default,(0,a.isUndefined)(t)||this.setFrame(t,e),e)}},{key:"setFrame",value:function(t,e){return this.timeline.add(t,e),this}},{key:"getFrame",value:function(t){return(0,a.isString)(t)&&~t.search(/([0-9]|\.|-|e-|e\+)+%/g)?this.timeline.get(parseFloat(t)/100*this.getDuration()):this.timeline.get(t)}},{key:"hasFrame",value:function(t){return this.timeline.has(t)}},{key:"removeFrame",value:function(t){var e=this.timeline;return e.remove(t),e.update(),delete this.frames[t],this}},{key:"copyFrame",value:function(t,e){var r=void 0;if((0,a.isObject)(t)){for(r in t)this.copyFrame(r,t[r]);return this}var n=this.getFrame(t);if(!n)return this;var i=n.clone();return this.setFrame(e,i),this}},{key:"mergeFrame",value:function(t,e){var r=void 0;if((0,a.isObject)(t)){for(r in t)this.mergeFrame(r,t[r]);return this}var n=this.getFrame(t);return n?(this.newFrame(e).merge(n),this):this}},{key:"getNowValue",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.timeline.length,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this.timeline,f=u.times,l=f.length,c=void 0,h=void 0,p=void 0,v=f[n],d=f[i];if(!(r<v)){for(p=n;p>=0&&(v=f[p],!(c=u.get(v)).has(t,e));--p);for(p=i;p<l&&(d=f[p],!(h=u.get(d)).has(t,e));++p);var y=c.get(t,e);if(!(0,a.isUndefined)(y)){if(!h)return y;var m=h.get(t,e);if((0,a.isUndefined)(m)||y===m)return y;v<0&&(v=0);var g=f[n],b=f[i];if(!o||!this.state.easing||g===b)return(0,s.dot)(y,m,r-v,d-r);var O=(0,s.dot)(y,m,g-v,d-g),_=(0,s.dot)(y,m,b-v,d-b),S=this.state.easing((r-g)/(b-g));return(0,s.dot)(O,_,S,1-S)}}}},{key:"getNearIndex",value:function(t){var e=this.timeline,r=e.times,n=e.last,i=e.length;if(0!==i){var o=parseInt(n>0?t*i/n:0,10),a=i-1,u=0;if(o<0?o=0:o>a&&(o=a),t<r[a])for(;u<a;){if((u===o||a===o)&&u+1===a){t<r[u]&&(a=u);break}if(r[o]>t)a=o;else{if(!(r[o]<t)){u=a=o;break}u=o}o=parseInt((u+a)/2,10)}else u=o=a;return{left:u,right:a}}}},{key:"getNowFrame",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getNearIndex(t);if(!r)return r;var n=r.left,i=r.right,o=this.newFrame(),u=this.timeline.names;for(var s in u){var f=u[s];for(var l in f){var c=this.getNowValue(s,l,t,n,i,e);(0,a.isUndefined)(c)||o.set(s,l,c)}}return o}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.options;for(var r in t)if("options"!==r){var n=t[r],i=void 0;i="from"===r?0:"to"===r?100:parseFloat(r),"number"!=typeof n?this.set(i,t[i]):this.mergeFrame(n,i)}return e&&this.setOptions(e),this}}]),e}();e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(1),a=r(0),u=r(7),s=r(2),f=(n=s)&&n.__esModule?n:{default:n};function l(t){return t instanceof f.default}function c(t){return h({},t,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in e){var i=e[n];(0,a.isObject)(i)?i instanceof f.default?t[n]=r?i.toValue():i.clone():(0,a.isArray)(i)?t[n]=i.slice():!(0,a.isObject)(t[n])||t[n]instanceof f.default?t[n]=c(i,r):h(t[n],i,r):t[n]=e[n]}return t}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=void 0;for(r in this.properties={},o.SCENE_ROLES)this.properties[r]={};this.load(e)}return i(t,[{key:"load",value:function(t){if(t&&!(0,a.isObject)(t))return this;var e=void 0,r=void 0;for(r in t)e=t[r],(0,a.has)(o.SCENE_ROLES,r)?this.set(r,e):!(0,a.isObject)(e)||(0,a.isArray)(e)||l(e)?this._set(o.PROPERTY,r,e):this.set(r,e);return this}},{key:"get",value:function(t,e){return e?this.properties[t]&&this.properties[t][e]:t in o.SCENE_ROLES?this.properties[t]:this.properties[o.PROPERTY][t]}},{key:"remove",value:function(t,e){return e?delete this.properties[t][e]:t in o.SCENE_ROLES?delete this.properties[t]:delete this.properties[o.PROPERTY][t],this}},{key:"_set",value:function(t,e,r){var n=t.trim(),i=r;(0,a.isString)(i)&&(i=(0,u.toPropertyObject)(i)),n in this.properties||(this.properties[n]={}),this.properties[n][e]=i}},{key:"set",value:function(t,e,r){var n=this,i=void 0,o=r;if((0,a.isObject)(t))return this.load(t),this;if(!e){for(var s=t.split(";"),f=s.length,l=0;l<f;++l){var c=/([^:]*):([\S\s]*)/g.exec(s[l]);!c||c.length<3||!c[1]||this.set(c[1].trim(),c[2])}return this}if((0,a.isObject)(e)){for(i in e)this._set(t,i,e[i]);return this}if((0,a.isUndefined)(r)){if((0,a.isString)(e))if((o=(0,u.splitSpace)(e).map(function(t){return(0,u.toPropertyObject)(t)})).every(function(t){return t.model&&"color"!==t.type}))return o.forEach(function(e){var r=e.model;e.model="",e.prefix="",e.suffix="",n._set(t,r,e)}),this;return this._set("property",t,e),this}return this._set(t,e,o),this}},{key:"has",value:function(t,e){return this.properties[t]&&(0,a.has)(this.properties[t],e)}},{key:"clone",value:function(){var e=new t;return e.merge(this),e}},{key:"merge",value:function(t){var e=this.properties,r=t.properties;return r?(h(e,r),this):this}},{key:"toObject",value:function(){return c(this.properties,!0)}}]),t}();e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringToColorObject=e.toPropertyObject=e.toBracketObject=e.toColorObject=e.arrayToColorObject=e.splitComma=e.splitSpace=void 0;var n,i=r(2),o=(n=i)&&n.__esModule?n:{default:n},a=r(14),u=r(0);var s=void 0,f=void 0,l=e.splitSpace=function(t){for(var e=t.split(/("[^"]*"|'[^']*'|[^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\s+/g),r=e.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=e[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},c=e.splitComma=function(t){for(var e=t.split(/("[^"]*"|'[^']*'|[^,\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^,\s()]*)|\s*,\s*/g),r=e.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=e[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},h=e.arrayToColorObject=function(t){return t instanceof o.default?(t.type="color",t.model="rgba",t.prefix="rgba(",t):(3===t.length&&(t[3]=1),new o.default(t,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"}))},p=e.toColorObject=function(t){var e=void 0;if(t instanceof o.default)e=t;else{if(!(0,u.isObject)(t))return(0,u.isString)(t)?f(t):t;e=h(t)}var r=e.value,n=r.length;4===n?r[3]=parseFloat(r[3]):3===n&&(r[3]=1),e.type="color";var i=e.model.toLowerCase(),s=void 0;switch("rgb"===i&&h(e),i){case"rgb":case"rgba":for(s=0;s<3;++s)r[s]=parseInt(r[s],10);break;case"hsl":case"hsla":for(s=1;s<3;++s)-1!==r[s].indexOf("%")&&(r[s]=parseFloat(r[s])/100);return r=(0,a.hslToRGB)(r),h(r)}return e},v=e.toBracketObject=function(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);if(!e||e.length<4)return t;var r=e[1]||"",n=r+"(",i=e[2],a=")"+e[3],u=c(i),f=void 0,l=",";return 1===u.length&&((f=s(i)).prefix||f.suffix||(l=f.separator,f=f.value)),f||(f=u.map(function(t){return s(t)})),new o.default(f,{separator:l,model:r,prefix:n,suffix:a})};e.stringToColorObject=f=function(t){var e=0,r=0;if("#"===t.charAt(0))return e=4===t.length?(0,a.hexToRGB)((0,a.hex3to6)(t)):(t.length,(0,a.hexToRGB)(t)),h(e);if(-1===t.indexOf("("))throw new Error("Invalid Format : Not a Color - "+t);return r=v(t),p(r)},e.toPropertyObject=s=function(t){if(!(0,u.isString)(t))return t;var e=c(t),r=void 0;if(e.length>1)return(r=new o.default(e.map(function(t){return s(t)}),",")).type="array",r;if((e=l(t)).length>1)return(r=new o.default(e.map(function(t){return s(t)})," ")).type="array",r;if((r=t.charAt(0))&&('"'===r||"'"===r))return t;if(-1!==t.indexOf("(")){if(r=v(t),!(0,u.isObject)(r))return r;var n=r.model.toLowerCase();if(-1!==a.COLOR_MODELS.indexOf(n))return p(r);for(var i=r.length,f=0;f<i;++f)r.set(f,s(r.get(f)));return r}return 0===t.indexOf("#")?p(t):t},e.toPropertyObject=s,e.stringToColorObject=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=l(r(5)),a=r(1),u=r(0),s=r(9),f=l(r(18));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){t.time;var e=t.frame,r=this.options.element;if(r){var n=e.cssText();if(this.state.cssText!==n){this.state.cssText=n;for(var i=r.length,o=0;o<i;++o)r[o].style.cssText=n}}}function h(){for(;;){var t=""+parseInt(1e5*Math.random(),10);if(!document.querySelector('[data-scene-id="'+t+'"]'))return t}}var p=function(t){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return n.on("animate",c),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"newFrame",value:function(t){var e=this.getFrame(t);return e||(e=new f.default,(0,u.isUndefined)(t)||this.setFrame(t,e),e)}},{key:"setId",value:function(t){var r=this.element;i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setId",this).call(this,t);var n=(0,s.toId)(this.options.id);if(this.options.selector||(this.options.selector='[data-scene-id="'+n+'"]'),!r)return this;for(var o=r.length,a=0;a<o;++a)r[a].setAttribute("data-scene-id",n);return this}},{key:"setSelector",value:function(t){return this.options.selector=t||'[data-scene-id="'+this.options.id+'"]',this.setElement(document.querySelectorAll(t)),this}},{key:"setElement",value:function(t){if(!t)return this;var e=this.id;return this.options.element=t instanceof Element?[t]:t,this.setId(e&&"null"!==e?e:h()),this}},{key:"copyCSSStyle",value:function(t){var e=this.element;if(e instanceof NodeList&&(e=e[0]),!e)return this;var r=e.style.cssText.split(";"),n=r.length,i={},o=void 0,a=void 0;for(o=0;o<n;++o)!(a=/([^:]*):([\S\s]*)/g.exec(r[o]))||a.length<3||(i[a[1]]=a[2]);return this.set(t,i),this}},{key:"copyCSSProperty",value:function(t,e){var r=this.element&&this.element[0];if(!r)return this;var n=r.style,i={};if((0,u.isObject)(e))for(var o=void 0,a=0,s=e.length;a<s;++a)o=e[a],i[e]=n&&n[o]||window.getComputedStyle(r)[o];else i[e]=n&&n[e]||window.getComputedStyle(r)[e];return this.set(t,i),this}},{key:"setOptions",value:function(t){i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t);var r=t&&t.selector,n=t&&t.element;return r||n?(n&&this.setElement(n),!0===r?this.setSelector(this.options.id):this.setSelector(r),this):this}},{key:"toKeyframes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),r=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.options.id||this.setId(h()).options.id);if(!r)return"";var n=this.getDuration(),i=n/e,o=this.timeline.times.map(function(e){var r=t.getNowFrame(e,!1);return e/n*i*100+"%{"+r.toCSS()+"}"});return i<1&&o.push("100%{"+this.getNowFrame(n,!1).toCSS()+"}"),"@keyframes "+a.PREFIX+"KEYFRAMES_"+(0,s.toId)(r)+"{\n\t\t\t"+o.join("\n")+"\n\t\t}"}},{key:"toCSS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.options.id||this.setId(h()).options.id;if(!r)return"";var n=this.options.selector,i=e.easingName||this.state.easingName,o=e.fillMode||this.state.fillMode,u=e.iterationCount||this.state.iterationCount,f=[];return(0,s.convertCrossBrowserCSSArray)(f,"animation-name",a.PREFIX+"KEYFRAMES_"+(0,s.toId)(r)),(0,s.convertCrossBrowserCSSArray)(f,"animation-duration",t+"s"),(0,s.convertCrossBrowserCSSArray)(f,"animation-timing-function",i),(0,s.convertCrossBrowserCSSArray)(f,"animation-fill-mode",o),(0,s.convertCrossBrowserCSSArray)(f,"animation-iteration-count",u),n+".startAnimation {\n\t\t\t"+f.join("")+"\n\t\t}\n\t\t"+this.toKeyframes()}},{key:"exportCSS",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,s.toId)(this.options.id||this.setId(h()).options.id||"");if(r){var n=document.querySelector("#"+a.PREFIX+r),i=this.toCSS(t,e);n?n.innerText=i:document.body.insertAdjacentHTML("beforeend",'<style id="'+a.PREFIX+"STYLE_"+r+'">'+i+"</style>")}}}]),e}();(0,u.defineGetter)({target:p.prototype,name:"element",parent:"options"}),e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.convertCrossBrowserCSSObject=function(t,e,r){return r?(t[e]=r,t["-moz-"+e]=r,t["-ms-"+e]=r,t["-o-"+e]=r,t["-webkit-"+e]=r,t):t},e.convertCrossBrowserCSSArray=function(t,e,r){return r?(t.push(e+": "+r+";","-moz-"+e+": "+r+";","-ms-"+e+": "+r+";","-o-"+e+": "+r+";","-webkit-"+e+": "+r+";"),t):t},e.toId=function(t){return t.match(/[0-9a-zA-Z]+/g).join("")}},function(t,e,r){"use strict";var n=u(r(11)),i=u(r(8)),o=r(1),a=u(r(3));function u(t){return t&&t.__esModule?t:{default:t}}n.default.EASE=o.EASE,n.default.EASE_IN=o.EASE_IN,n.default.EASE_OUT=o.EASE_OUT,n.default.EASE_IN_OUT=o.EASE_IN_OUT,n.default.cubicBezier=a.default,n.default.SceneItem=i.default,t.exports=n.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=s(r(12)),o=s(r(8)),a=r(0),u=r(1);function s(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"newItem",value:function(t,e){if((0,a.has)(this.items,t))return this.items[t];var r=new o.default;return r.setOptions(e),this.setItem(t,r),r}},{key:"setSelector",value:function(t,e){var r=void 0,n=void 0,i=e;if("string"==typeof t)return(r=this.getItem(i))?(r.setSelector(t),this):this;for(n in t)i=t[n],(r=this.getItem(i))&&r.setSelector(n);return this}},{key:"load",value:function(t,r){if(function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"load",this).call(this,t,r),!this.options.selector)return this;var n=void 0,i=void 0;for(n in t)"options"!==n&&(i=this.getItem(n))&&i.setSelector(n);return this}},{key:"exportCSS",value:function(){var t=this.items,e=this.getDuration();for(var r in e==e&&e!==1/0&&e!==-1/0||(e=0),t){var n=t[r];n.exportCSS(e||n.getDuration())}return this}},{key:"playCSS",value:function(){this.exportCSS();var t=this.items;for(var e in t){var r=t[e].options.element;if(r)for(var n=r.length,i=0;i<n;++i)r[i].className+=" startAnimation"}return this}}]),e}();u.SCENE_ROLES.transform=!0,u.SCENE_ROLES.filter=!0,e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=u(r(4)),o=u(r(5)),a=r(0);function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.items={},n.load(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,null,[{key:"addRole",value:function(t){o.default.addRole(t)}}]),n(e,[{key:"getDuration",value:function(){var t=this.items,e=0;for(var r in t){var n=t[r];e=Math.max(e,n.getTotalDuration()/n.state.playSpeed)}return e}},{key:"setDuration",value:function(t){var e=this.items,r=t/this.getActiveDuration();for(var n in e){var i=e[n],o=i.state,a=o.playSpeed,u=o.delay,s=i.getTotalDuration()/a*r-u/a;i.setDuration(s)}}},{key:"getItem",value:function(t){return this.items[t]}},{key:"newItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,a.has)(this.items,t))return this.items[t];var r=new o.default;return this.setItem(t,r),r.setOptions(e),r}},{key:"setItem",value:function(t,e){return e.setId(t),this.items[t]=e,this}},{key:"setIterationTime",value:function(t){(function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setIterationTime",this).call(this,t);var r=this.getIterationTime(),n=this.items,i=void 0,o=void 0;for(o in n)(i=n[o]).setTime(r*i.state.playSpeed);return this}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.options,r=void 0;for(var n in t)"options"!==n&&((r=this.newItem(n)).load(t[n]),e&&r.setOptions(e));return this}},{key:"forEach",value:function(t){var e=this.items;for(var r in e)t(e[r],r,e)}}]),e}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._events={}}return n(t,[{key:"on",value:function(t,e){var r=this._events,n=void 0,o=void 0;if((0,i.isObject)(t)){for(n in t)this.on(n,t[n]);return this}if((0,i.has)(r,t)||(r[t]=[]),(0,i.isObject)(e)){for(o in e)this.on(t,e[o]);return this}return r[t].push(e),this}},{key:"trigger",value:function(t){for(var e=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=this._events;return(0,i.has)(a,t)?(a[t].forEach(function(t){t.apply(e,n)}),this):this}}]),t}();o.defaultEvents={},e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.COLOR_MODELS=["rgb","rgba","hsl","hsla"];var n=e.cutHex=function(t){return"#"===t.charAt(0)?t.substring(1,9):t};e.hexToRGB=function(t){var e=n(t),r=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),a=parseInt(e.substring(6,8),16)/255;return isNaN(a)&&(a=1),[r,i,o,a]},e.hex3to6=function(t){var e=t.charAt(1),r=t.charAt(2),n=t.charAt(3);return["#",e,e,r,r,n,n].join("")},e.hslToRGB=function(t){var e=t[0],r=t[1],n=t[2];e<0&&(e+=360*parseInt((Math.abs(e)+360)/360,10)),e%=360;var i=(1-Math.abs(2*n-1))*r,o=i*(1-Math.abs(e/60%2-1)),a=n-i/2,u=void 0;e<60?u=[i,o,0]:e<120?u=[o,i,0]:e<180?u=[0,i,o]:e<240?u=[0,o,i]:e<300?u=[o,0,i]:e<360&&(u=[i,0,o]);var s=[Math.round(255*(u[0]+a)),Math.round(255*(u[1]+a)),Math.round(255*(u[2]+a))];return t.length>3&&(s[3]=t[3]),s}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(16),a=(n=o)&&n.__esModule?n:{default:n};var u=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.names={},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"update",value:function(){var t=this.items;for(var e in t)this.updateFrame(t[e]);return this}},{key:"updateFrame",value:function(t){if(!t)return this;var e=t.properties,r=this.names;for(var n in e){r[n]=r[n]||{};var i=e[n];for(var o in i)r[n][o]=!0}return this}}]),e}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.times=[],this.items={}}return n(t,[{key:"add",value:function(t,e){return this.items[t]=e,this.addTime(t),this}},{key:"addTime",value:function(t){var e=this.times,r=e.length,n=r,i=void 0;for(i=0;i<r;++i){if(t===e[i])return this;if(t<e[i]){n=i;break}}return this.times.splice(n,0,t),this}},{key:"has",value:function(t){return(0,i.has)(this.items,t)}},{key:"get",value:function(t){return this.items[t]}},{key:"remove",value:function(t){return delete this.items[t],this.removeTime(t),this}},{key:"removeTime",value:function(t){var e=this.times.indexOf(t);return-1===e?this:(this.times.splice(e,1),this)}},{key:"last",get:function(){var t=this.times;return 0===t.length?0:t[t.length-1]}},{key:"length",get:function(){return this.times.length}}]),t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dot=e.dotObject=e.dotColor=e.dotArray=void 0;var n,i=r(0),o=r(2),a=(n=o)&&n.__esModule?n:{default:n},u=r(7);var s=void 0,f=e.dotArray=function(t,e,r,n){var i=[],o=void 0,a=void 0;for(a in t)o=t[a],i[a]=a in e?s(o,e[a],r,n):o;return i},l=e.dotColor=function(t,e,r,n){var i=t,o=e;i instanceof a.default||(i=(0,u.toColorObject)(i)),o instanceof a.default||(o=(0,u.toColorObject)(o));var l=i.value,c=o.value,h=i.model;if(h!==o.model)return s(i.toValue(),o.toValue(),r,n);3===l.length&&(l[3]=1),3===c.length&&(c[3]=1);for(var p=f(l,c,r,n),v=h,d=0;d<3;++d)p[d]=parseInt(p[d],10);return new a.default(p,{type:"color",model:v,prefix:v+"(",suffix:")"})},c=e.dotObject=function(t,e,r,n){if("color"===t.type)return l(t,e,r,n);var o=t.value,u=e.value;if(!(0,i.isObject)(e))return t;var s=f(o,u,r,n),c=new a.default(s,t.separator);return c.prefix=t.prefix,c.suffix=t.suffix,c};e.dot=s=function(t,e,r,n){if(t instanceof a.default)return c(t,e,r,n);if(r+n===0)return t;var o=(0,i.splitUnit)(t),u=(0,i.splitUnit)(e),s=r/(r+n),f=1-s,l=void 0;if(isNaN(o.value)||isNaN(u.value))return s>=1?e:t;l=o.value*f+u.value*s;var h=o.unit||u.unit||!1;return!1===h?l:l+h.trim()},e.dot=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=a(r(6)),o=(a(r(2)),r(9));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){if(!t)return"";var e=[];for(var r in t)e.push(r+"("+t[r]+")");return e.join(" ")}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"toCSS",value:function(){var t=this.toObject(),e={},r=t.property;for(var n in r)e[n]=r[n];var i=u(t.transform),a=u(t.filter);i&&(0,o.convertCrossBrowserCSSObject)(e,"transform",i),a&&(0,o.convertCrossBrowserCSSObject)(e,"filter",a);var s=[];for(var f in e)s.push(f+":"+e[f]+";");return s.join("")}},{key:"cssText",value:function(){return this.toCSS()}}]),e}();e.default=s}])});