<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Scenario.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Scenario.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Animator from "./Animator";
import {isObject, has} from "./Util";

class Scenario extends Animator {
	/**
     * create a Scenario
     * @class
     * @param {Object} [scenes=false] scenes.
     * @example
var scenario = new Scenario({
	0 : scene1,
	0.4 : scene2,
	0.7 : scene3
});
     */
	constructor(scenes = {}) {
		super();
		this.scenes = {};
		this.addScene(scenes);
	}
	get duration() {
		const scenes = this.scenes;
		let _scenes;
		let scene;
		let time = 0;
		let id;
		let i;
		let length;

		for (id in scenes) {
			_scenes = scenes[id];
			id = parseFloat(id);
			for (length = _scenes.length, i = length - 1; i >= 0; --i) {
				scene = _scenes[i];
				time = Math.max(time, id + scene.totalDuration / scene.playSpeed);
			}
		}
		return time;
	}
	setIterationTime(_time) {
		super.setIterationTime(_time);
		const time = this.currentIterationTime;
		const scenes = this.scenes;
		let scene;
		let id;
		let _scenes;
		let i;
		let length;

		for (id in scenes) {
			_scenes = scenes[id];
			id = parseFloat(id);
			for (length = _scenes.length, i = length - 1; i >= 0; --i) {
				scene = _scenes[i];
				scene.currentTime = time * scene.playSpeed - id;
			}
		}
		return this;
	}
	/**
     * Add Scene in time
     * @param {number} time - Play Time.
     * @param {Scene} Scene - Scene.
     * @return {Scenario} An instance.
     * @example
var scenario = new Scenario();
scenario.addScene(0, scene1);
scenario.addScene(0.5, scene2);
scenario.addScene(1, scene3);
scenario.addScene({
	2: scene4,
	3: scene5
});
     */
	addScene(_time, scene) {
		const scenes = this.scenes;

		if (isObject(_time)) {
			for (const time in _time) {
				this.addScene(time, _time[time]);
			}
			return this;
		}
		if (!has(scenes, _time)) {
			scenes[_time] = [];
		}
		scenes[_time].push(scene);
		return this;
	}
}

export default Scenario;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Animator.html">Animator</a></li><li><a href="CSSFrame.html">CSSFrame</a></li><li><a href="CSSItem.html">CSSItem</a></li><li><a href="EventTrigger.html">EventTrigger</a></li><li><a href="Frame.html">Frame</a></li><li><a href="FrameTimeline.html">FrameTimeline</a></li><li><a href="PropertyObject.html">PropertyObject</a></li><li><a href="Scenario.html">Scenario</a></li><li><a href="Scene.html">Scene</a></li><li><a href="SceneItem.html">SceneItem</a></li><li><a href="Timeline.html">Timeline</a></li></ul><h3>Namespaces</h3><ul><li><a href="Color.html">Color</a></li><li><a href="Dot.html">Dot</a></li><li><a href="Property.html">Property</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Mar 30 2018 15:00:35 GMT+0900 (KST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
