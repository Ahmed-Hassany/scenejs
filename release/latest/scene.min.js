/*!
 * Copyright (c) 2018 Daybrush
 * license: MIT
 * author: Daybrush
 * repository: https://github.com/daybrush/scenejs.git
 * @version 1.0.0-alpha
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scene",[],e):"object"==typeof exports?exports.Scene=e():t.Scene=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var i=r(1),n=i;for(var o in n)i.default[o]=n[o];t.exports=i.default},function(t,e,r){"use strict";e.__esModule=!0;var i=r(2),n=r(8);e.SceneItem=n.default;var o=r(9);e.Frame=o.default;var s=r(13);e.Keyframes=s.default;var a=r(11);e.PropertyObject=a.default;var u=r(7);e.easing=u;var f=r(3);e.Animator=f.default,e.default=i.default},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(3),s=r(8),a=r(6),u=r(5),f=function(t){function e(e,r){var i=t.call(this)||this;return i.items={},i.load(e,r),i}return n(e,t),e.prototype.getDuration=function(){var t=this.items,e=0;for(var r in t){var i=t[r];e=Math.max(e,i.getTotalDuration()/i.getPlaySpeed())}return e},e.prototype.setDuration=function(t){var e=this.items,r=this.getDuration();if(!isFinite(r))return this;var i=t/r;for(var n in e){var o=e[n];o.setDelay(o.getDelay()*i),o.setDuration(o.getDuration()*i)}return this},e.prototype.getItem=function(t){return this.items[t]},e.prototype.newItem=function(t,e){if(void 0===e&&(e={}),u.has(this.items,t))return this.items[t];var r=new s.default;return this.setItem(t,r),r.setOptions(e),r},e.prototype.setItem=function(t,e){return e.setId(t),this.items[t]=e,this},e.prototype.setIterationTime=function(e){t.prototype.setIterationTime.call(this,e);var r=this.getIterationTime(),i=this.items,n=this.state.easing;for(var o in i){var s=i[o];s.setTime(r*s.state.playSpeed,n,this)}return this},e.prototype.forEach=function(t){var e=this.items;for(var r in e)t(e[r],r,e);return this},e.prototype.exportCSS=function(){var t=this.items,e=this.getDuration();for(var r in e&&isFinite(e)||(e=0),t){t[r].exportCSS(e,this.state)}return this},e.prototype.playCSS=function(t,e){var r=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!a.ANIMATION||"running"===this.getPlayState())return this;t&&this.exportCSS();var i,n=this.items;for(var o in n){var s=n[o];s.playCSS(!1,e),s.getState("playCSS")&&(i=s)}if(!i)return this;var u=function(t){var e=t.currentTime,i=t.iterationCount;r.state.currentTime=e,r.setCurrentIterationCount(i)},f=function(){r.end(),r.setState({playCSS:!1}),i.off("ended",f),i.off("iteration",u)};return i.on("ended",f),i.on("iteration",u),this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play"),this},e.prototype.load=function(t,e){void 0===t&&(t={}),void 0===e&&(e=t.options);var r=e&&e.selector;for(var i in t)if("options"!==i){var n=t[i],o=void 0;n instanceof s.default?(this.setItem(i,n),o=n):(o=this.newItem(i)).load(n),r&&o.setSelector(i)}this.setOptions(e)},e.VERSION="#__VERSION__#",e}(o.default);e.default=f},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(4),s=r(7),a=r(5),u=0,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var e=Date.now(),r=Math.max(0,16-(e-u)),i=window.setTimeout(function(){t(e+r)},1e3/60);return u=e+r,i};function p(t,e){return"reverse"===e||e===(t%2>=1?"alternate":"alternate-reverse")}e.isDirectionReverse=p;var h=function(t){function e(e){var r=t.call(this)||this;return r.options={},r.state={easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:"normal",playSpeed:1,currentTime:0,currentIterationTime:-1,currentIterationCount:0,prevTime:0,playState:"paused",duration:0},r.setOptions(e),r}return n(e,t),e.prototype.setEasing=function(t){return this.setState(Array.isArray(t)?{easingName:"cubic-bezier("+t.join(",")+")",easing:s.bezier(t[0],t[1],t[2],t[3])}:{easing:t,easingName:t.easingName||"linear"}),this},e.prototype.setOptions=function(t){if(!t)return this;for(var e in t){var r=t[e];"easing"!==e?"duration"!==e?(e in this.state?this.state:this.options)[e]=r:r&&this.setDuration(r):this.setEasing(r)}return this},e.prototype.getTotalDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.state.delay+this.getActiveDuration()},e.prototype.getActiveDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.getDuration()*this.state.iterationCount},e.prototype.isEnded=function(){return 0===this.getTime()&&"paused"===this.state.playState||!(this.getTime()<this.getTotalDuration())},e.prototype.isPaused=function(){return"paused"===this.state.playState},e.prototype.setNext=function(t){return this.on("ended",function(){t.play()}),this},e.prototype.play=function(){var t=this;return this.isEnded()&&this.setTime(0),this.state.playState="running",f(function(e){t.state.prevTime=e,t.tick(e)}),this.trigger("play"),this},e.prototype.pause=function(){return this.state.playState="paused",this.trigger("paused"),this},e.prototype.end=function(){return this.pause(),this.trigger("ended"),this},e.prototype.reset=function(){return this.setTime(0),this.pause(),this},e.prototype.setTime=function(t){var e=this.getTotalDuration(),r=t;return r<0?r=0:r>e&&(r=e),this.state.currentTime=r,this.calculateIterationTime(),this.trigger("timeupdate",{currentTime:r,time:this.getIterationTime(),iterationCount:this.getIterationCount()}),this},e.prototype.getState=function(t){return this.state[t]},e.prototype.setState=function(t){for(var e in t)this.state[e]=t[e];return this},e.prototype.getTime=function(){return this.state.currentTime},e.prototype.getActiveTime=function(){return a.toFixed(Math.max(this.state.currentTime-this.state.delay,0))},e.prototype.getIterationTime=function(){return this.state.currentIterationTime},e.prototype.setCurrentIterationCount=function(t){var e=this.state,r=Math.floor(t);return e.currentIterationCount<r&&this.trigger("iteration",{currentTime:e.currentTime,iterationCount:r}),e.currentIterationCount=t,this},e.prototype.setIterationTime=function(t){return this.state.currentIterationTime=t,this},e.prototype.calculateIterationTime=function(){var t=this.state,e=t.iterationCount,r=t.fillMode,i=t.direction,n=t.currentTime,o=t.delay,s=this.getDuration(),a=this.getActiveTime(),u=0===s?0:a/s,f=s?a%s:0;if(n-o<0||!u)return this.setIterationTime(0),this;this.setCurrentIterationCount(u);var h=p(u,i);(h&&(f=s-f),"infinite"!==e)&&(u>=e&&(f=s*("both"===r||"forwards"===r?e%1||1:0),h&&(f=s-f)));return this.setIterationTime(f),this},e.prototype.caculateEasing=function(t){if(!this.state.easing)return t;var e=this.getDuration();return(0,this.state.easing)(0===e?0:t/e)*t},e.prototype.tick=function(t){var e=this,r=this.state,i=r.playSpeed,n=r.prevTime,o=this.getTime()+Math.min(1e3,t*i-n)/1e3;r.prevTime=t*i,this.setTime(o),this.isEnded()&&this.end(),"paused"!==r.playState&&f(function(t){e.tick(t)})},e}(o.default),c=h.prototype;a.defineGetterSetter(c,"delay","state"),a.defineGetterSetter(c,"fillMode","state"),a.defineGetterSetter(c,"iterationCount","state"),a.defineGetterSetter(c,"direction","state"),a.defineGetterSetter(c,"playState","state"),a.defineGetterSetter(c,"playSpeed","state"),a.defineGetterSetter(c,"duration","state"),a.defineGetter(c,"easingName","state"),a.defineGetter(c,"easing","state"),e.default=h},function(t,e,r){"use strict";e.__esModule=!0;var i=r(5),n=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var r=this,n=this.events;if("object"==typeof t){for(var o in t)this.on(o,t[o]);return this}return i.has(n,t)||(n[t]=[]),e?"object"==typeof e?(e.forEach(function(e){return r.on(t,e)}),this):(n[t].push(e),this):this},t.prototype.off=function(t,e){if(t)if(e){var r=this.events[t];if(!r)return this;var i=r.indexOf(e);-1!==i&&r.splice(i,1)}else this.events[t]=[];else this.events={};return this},t.prototype.trigger=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this.events;if(!i.has(o,t))return this;var s=o[t];if(r.length){var a=r[0];a.type=t,a.currentTarget=this,!a.target&&(a.target=this)}return s.forEach(function(t){t.apply(e,r)}),this},t}();e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var i=r(6);function n(t){return t&&"object"==typeof t}function o(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}function s(t,e,r){t[o("get "+e)]=function(){return(r?this[r]:this)[e]}}function a(t,e,r){t[o("set "+e)]=function(t){return r?this[r][e]=t:this[e]=t,this}}e.toFixed=function(t){return Math.round(t*i.MAXIMUM)/i.MAXIMUM},e.isRole=function(t){var e=t.length,r=i.SCENE_ROLES;if(0===e)return!1;for(var o=0;o<e;++o){if(!(r&&n(r)&&t[o]in r))return!1;r=r[t[o]]}return!0},e.isUndefined=function(t){return void 0===t},e.isObject=n,e.isArray=function(t){return Array.isArray(t)},e.isString=function(t){return"string"==typeof t},e.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.splitUnit=function(t){var e=t,r=e.match(/([0-9]|\.|-|e-|e\+)+/g),i=r?r[0]:t;return{unit:e.replace(i,"")||"",value:parseFloat(i)}},e.camelize=o,e.decamelize=function(t){return t.replace(/([a-z])([A-Z])/g,function(t,e,r){return e+"-"+r.toLowerCase()})},e.defineGetter=s,e.defineSetter=a,e.defineGetterSetter=function(t,e,r){s(t,e,r),a(t,e,r)}},function(t,e,r){"use strict";e.__esModule=!0,e.PREFIX="__SCENEJS_",e.SCENE_ROLES={transform:!0,filter:!0},e.MAXIMUM=1e6,e.THRESHOLD=1e-6;var i=function(t,e){var r=(document.body||document.documentElement).style,i=t.length;if(void 0!==r[e])return e;for(var n=0;n<i;++n){var o="-"+t[n]+"-"+e;if(void 0!==r[o])return o}return""};e.TRANSFORM=i(["webkit","ms","moz","o"],"transform"),e.FILTER=i(["webkit","ms","moz","o"],"filter"),e.ANIMATION=i(["webkit","ms","moz","o"],"animation"),e.KEYFRAMES=e.ANIMATION.replace("animation","keyframes"),e.START_ANIMATION="startAnimation"},function(t,e,r){"use strict";function i(t,e,r){var i=1-r;return r*r*r+3*r*r*i*e+3*r*i*i*t}function n(t,e,r,n){var o=function(o){var s=function(t,e,r){for(var n=r,o=1;Math.abs(o)>.001;){if(o=i(t,e,n)-r,Math.abs(o)<.001)return n;n-=o/2}return n}(t,r,Math.max(Math.min(1,o),0));return i(e,n,s)};return o.easingName="cubic-bezier("+t+", "+e+", "+r+", "+n+")",o}e.__esModule=!0,e.bezier=n,e.LINEAR=n(0,0,1,1),e.EASE=n(.25,.1,.25,1),e.EASE_IN=n(.42,0,1,1),e.EASE_OUT=n(0,0,.58,1),e.EASE_IN_OUT=n(.42,0,.58,1)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(3),s=r(9),a=r(5),u=r(13),f=r(14),p=r(6),h=r(15);function c(t){return t.match(/[0-9a-zA-Z]+/g).join("")}function l(){for(;;){var t=""+Math.floor(1e5*Math.random());if(!document.querySelector('[data-scene-id="'+t+'"]'))return t}}function d(t){var e=[];for(var r in t)e.push(p.ANIMATION+"-"+a.decamelize(r)+" : "+t[r]+";");return e.join("")}var v=function(t){function e(e,r){var i=t.call(this)||this;return i.keyframes=new u.default,i.load(e,r),i}return n(e,t),e.prototype.getDuration=function(){return Math.max(this.state.duration,this.keyframes.getDuration())},e.prototype.setDuration=function(e){if(0===e)return this;var r=this.getDuration();return r>0&&this.keyframes.setDuration(e,r),t.prototype.setDuration.call(this,e),this},e.prototype.setId=function(t){var e=this.elements;this.setState({id:t});var r=c(this.state.id);if(this.options.selector||(this.options.selector='[data-scene-id="'+r+'"]'),!e)return this;var i=e.length;if(!i)return this;for(var n=0;n<i;++n)e[n].setAttribute("data-scene-id",r);return this},e.prototype.getId=function(){return this.state.id},e.prototype.set=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(a.isArray(t))return t.forEach(function(t){e.set.apply(e,[t].concat(r))}),this;if(a.isObject(t))return this.load(t),this;var n=this.newFrame(t);return n.set.apply(n,r),this.updateFrame(n),this},e.prototype.get=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getFrame(t);return i&&i.get.apply(i,e)},e.prototype.remove=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getFrame(t);return i&&i.remove.apply(i,e),this},e.prototype.setSelector=function(t){return this.options.selector=!0===t?this.state.id:t||'[data-scene-id="'+this.state.id+'"]',this.setElement(document.querySelectorAll(this.options.selector)),this},e.prototype.setElement=function(t){if(!t)return this;if("string"==typeof t)return this.setSelector(t);var e=this.state.id;return this.elements=t instanceof Element?[t]:t,this.setId(e&&"null"!==e?e:l()),this},e.prototype.setCSS=function(t,e){return this.set(t,this.fromCSS(e)),this},e.prototype.fromCSS=function(t){return h.fromCSS(this.elements,t)},e.prototype.setTime=function(e,r,i){return t.prototype.setTime.call(this,e),this.animate(r,i),this},e.prototype.update=function(){return this.keyframes.update(),this},e.prototype.updateFrame=function(t){return this.keyframes.updateFrame(t),this},e.prototype.newFrame=function(t){var e=this.getFrame(t);return e||(e=new s.default,this.setFrame(t,e),e)},e.prototype.setFrame=function(t,e){return this.keyframes.add(this._getTime(t),e),this.keyframes.update(),this},e.prototype.getFrame=function(t){return this.keyframes.get(this._getTime(t))},e.prototype.hasFrame=function(t){return this.keyframes.has(t)},e.prototype.removeFrame=function(t){var e=this.keyframes;return e.remove(t),e.update(),this},e.prototype.copyFrame=function(t,e){if(a.isObject(t)){for(var r in t)this.copyFrame(r,t[r]);return this}var i=this.getFrame(t);if(!i)return this;var n=i.clone();return this.setFrame(e,n),this},e.prototype.mergeFrame=function(t,e){if(a.isObject(t)){for(var r in t)this.mergeFrame(r,t[r]);return this}var i=this.getFrame(t);return i?(this.newFrame(e).merge(i),this):this},e.prototype.getNowFrame=function(t,e){var r=this,i=new s.default,n=this.keyframes.getNames(),o=this._getNearTimeIndex(t),u=o.left,f=o.right;return n.forEach(function(n){var o=r._getNowValue(t,u,f,n,e);a.isUndefined(o)||i.set(n,o)}),i},e.prototype.load=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=t.options),a.isArray(t)){for(var r=t.length,i=0;i<r;++i){var n=1===r?0:this._getTime(i/(r-1)*100+"%",e);this.set(n,t[i])}return this}if(t.keyframes)this.set(t.keyframes);else for(var n in t)if("options"!==n&&"keyframes"!==n){var o=t[n],s=this._getTime(n);"number"!=typeof o?this.set(s,o):this.mergeFrame(o,s)}return e&&this.setOptions(e),this},e.prototype.clone=function(t){void 0===t&&(t={});var r=new e;return r.setOptions(this.state),r.setOptions(t),this.keyframes.forEach(function(t,e){return r.setFrame(e,t.clone())}),r},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e);var r=e&&e.selector,i=this.options.elements||this.options.element;return i?this.setElement(i):r&&this.setSelector(!0===r?this.state.id:r),this},e.prototype.getAllTimes=function(t,e){void 0===t&&(t=!0),void 0===e&&(e={});var r=this.keyframes.times.slice(),i=r.length,n=[],s={};if(!i)return{keys:[],values:{},times:[]};var u=[],f=this.getDuration(),h=e.direction||this.state.direction,c="alternate"===h||"alternate-reverse"===h;!this.getFrame(0)&&r.unshift(0),!this.getFrame(f)&&r.push(f),i=r.length;for(var l=e.iterationCount||this.state.iterationCount,d=(l="infinite"!==l?l:1)*f,v=0;v<l;++v)for(var m=o.isDirectionReverse(v,h),y=v*f,g=0;g<i;++g)if(!c||0===v||0!==g){var S=0!==g||(0===v?t:c)?0:p.THRESHOLD,T=m?r[i-1-g]:r[g],O=a.toFixed(m?f-T:T),_=a.toFixed(y+O+S);if(d<_)break;n.push(_),s[_]=T,-1===u.indexOf(T)&&u.push(T)}if(n[n.length-1]<d){m=o.isDirectionReverse(l,h),T=a.toFixed(f*(m?1-l%1:l%1));n.push(d),s[d]=T,-1===u.indexOf(T)&&u.push(T)}return{keys:n,values:s,times:u}},e.prototype.toCSS=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var r=this.state,i=r.id||this.setId(l()).state.id;if(!i)return"";var n=0===t,o=this.options.selector,s=e.playSpeed||1,a=((void 0===e.delay?r.delay:e.delay)||0)/s,u=!n&&e.easing&&e.easingName||r.easingName,f=!n&&e.iterationCount||r.iterationCount,h=d({fillMode:"forwards"!==e.fillMode&&e.fillMode||r.fillMode,direction:"normal"!==e.direction&&e.direction||r.direction,delay:a+"s",name:p.PREFIX+"KEYFRAMES_"+c(i),duration:t/s+"s",timingFunction:u,iterationCount:f});return o+"."+p.START_ANIMATION+" {\n\t\t\t"+h+"\n\t\t}\n\t\t"+this._toKeyframes(t,e)},e.prototype.exportCSS=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var r=c(this.state.id||this.setId(l()).state.id||"");if(r){var i=document.querySelector("#"+p.PREFIX+r),n=this.toCSS(t,e);i?i.innerText=n:document.body.insertAdjacentHTML("beforeend",'<style id="'+p.PREFIX+"STYLE_"+r+'">'+n+"</style>")}},e.prototype.playCSS=function(t,e){var r=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!p.ANIMATION||"running"===this.getPlayState())return this;var i=this.elements;if(!i||!i.length)return this;this.isEnded()&&this.setTime(0),t&&this.exportCSS();for(var n=i.length,o=d(e),s=0;s<n;++s){var a=i[s];a.style.cssText+=o,h.hasClass(a,p.START_ANIMATION)?(h.removeClass(a,p.START_ANIMATION),function(t){requestAnimationFrame(function(){requestAnimationFrame(function(){h.addClass(t,p.START_ANIMATION)})})}(a)):h.addClass(a,p.START_ANIMATION)}this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play");var u=this.getDuration(),f=i[0],c=function(){r.end(),f&&(f.removeEventListener("animationend",c),f.removeEventListener("animationiteration",l))},l=function(t){var e=t.elapsedTime,i=e/u;r.state.currentTime=e,r.setCurrentIterationCount(i)};return f.addEventListener("animationend",c),f.addEventListener("animationiteration",l),this},e.prototype.animate=function(t,e){var r=this.getIterationTime(),i=this.getEasing()||t,n=this.getNowFrame(r,i),o=this.getTime();this.trigger("animate",{frame:n,currentTime:o,time:r}),e&&e.trigger("animate",{frame:n,currentTime:o,target:this,time:r});var s=this.elements;if(!s||!s.length)return n;var a=n.toCSS();if(this.state.cssText===a)return n;this.state.cssText=a;for(var u=s.length,f=0;f<u;++f)s[f].style.cssText+=a;return n},e.prototype._getTime=function(t,e){var r=e&&e.duration||this.getDuration()||100;if(a.isString(t)){if("from"===t)return 0;if("to"===t)return r;var i=a.splitUnit(t),n=i.unit,o=i.value;return"%"===n?(!this.getDuration()&&(this.state.duration=r),parseFloat(t)/100*r):">"===n?o+p.THRESHOLD:o}return t},e.prototype._toKeyframes=function(t,e){var r=this;void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var i=this.state.id||this.setId(l()).state.id;if(!i)return"";var n=this.state.playSpeed,o=void 0!==e.iterationCount,s=this.state.iterationCount,a=o?this.state.delay:0,u=o?this.state.direction:"normal",f={},h=this.getAllTimes(!0,{duration:t,delay:a,direction:u,iterationCount:o&&"infinite"!==s?s:1}),d=h.keys,v=h.values,m=h.times,y=d.length,g=[];if(!d.length)return"";m.forEach(function(t){f[t]=r.getNowFrame(t).toCSS()}),a&&(g.push("0%{"+f[0]+"}"),"reverse"!==u&&"alternate-reverse"!==u||g.push(a/n/t*100-1e-5+"%{"+f[0]+"}")),d.forEach(function(e){g.push((a+e)/n/t*100+"%{"+f[v[e]]+"}")});var S=d[y-1];return(a+S)/n<t&&g.push("100%{"+f[v[S]]),"@"+p.KEYFRAMES+" "+p.PREFIX+"KEYFRAMES_"+c(i)+"{\n\t\t\t"+g.join("\n")+"\n\t\t}"},e.prototype._getNowValue=function(t,e,r,i,n){void 0===n&&(n=this.state.easing);for(var o,s,u,p,h=this.keyframes,c=h.times,l=c.length,d=e;d>=0;--d){if((v=h.get(c[d])).has.apply(v,i)){o=c[d],u=v;break}}for(d=r;d<l;++d){var v;if((v=h.get(c[d])).has.apply(v,i)){s=c[d],p=v;break}}var m=u&&u.get.apply(u,i),y=p&&p.get.apply(p,i);if(!u||a.isUndefined(m))return y;if(!p||a.isUndefined(y)||m===y)return m;o<0&&(o=0);var g=this.state.easing||n;return f.dotValue(t,o,s,m,y,g)},e.prototype._getNearTimeIndex=function(t){for(var e=this.keyframes.times,r=e.length,i=0;i<r;++i){if(e[i]===t)return{left:i,right:i};if(e[i]>t)return{left:0===i?0:i-1,right:i}}return{left:r-1,right:r-1}},e}(o.default);e.default=v},function(t,e,r){"use strict";e.__esModule=!0;var i=r(6),n=r(5),o=r(10),s=r(11);function a(t){if(!t)return"";var e=[];for(var r in t)e.push(r+"("+t[r]+")");return e.join(" ")}function u(t,e){return void 0===e&&(e=!1),f({},t,e)}function f(t,e,r){for(var i in void 0===r&&(r=!1),e){var o=e[i];n.isObject(o)?o instanceof s.default?t[i]=r?o.toValue():o.clone():n.isArray(o)?t[i]=o.slice():!n.isObject(t[i])||t[i]instanceof s.default?t[i]=u(o,r):f(t[i],o,r):t[i]=e[i]}return t}var p=function(){function t(t){void 0===t&&(t={}),this.properties={},this.set(t)}return t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this.properties,i=t.length,o=0;o<i;++o){if(!n.isObject(r))return;r=r[t[o]]}return r},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.properties,i=t.length;if(!i)return this;for(var o=0;o<i-1;++o){if(!n.isObject(r))return this;r=r[t[o]]}return delete r[t[i-1]],this},t.prototype.set=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length,a=e.slice(0,-1),u=e[i-1];if(2===i&&n.isArray(a[0]))this._set(a[0],u);else if(n.isArray(u))this._set(a,u);else if(function(t){return t instanceof s.default}(u))n.isRole(a)?this.set.apply(this,a.concat([o.toObject(u)])):this._set(a,u);else if(n.isObject(u))for(var f in u)this.set.apply(this,a.concat([f,u[f]]));else if(n.isString(u)){if(n.isRole(a))return this.set.apply(this,a.concat([o.toPropertyObject(u)])),this;var p=o.splitStyle(u);if(p.forEach(function(e){t.set.apply(t,a.concat([e]))}),p.length)return this;this._set(a,u)}else this._set(a,u);return this},t.prototype.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.properties,i=t.length;if(!i)return!1;for(var o=0;o<i;++o){if(!(n.isObject(r)&&t[o]in r))return!1;r=r[t[o]]}return!0},t.prototype.clone=function(){var e=new t;return e.merge(this),e},t.prototype.merge=function(t){var e=this.properties,r=t.properties;return r?(f(e,r),this):this},t.prototype.toObject=function(){return u(this.properties,!0)},t.prototype.toCSSObject=function(){var t=this.toObject(),e={};for(var r in t)n.isRole([r])||(e[r]=t[r]);var o=a(t.transform),s=a(t.filter);return i.TRANSFORM&&o&&(e[i.TRANSFORM]=o),i.FILTER&&s&&(e[i.FILTER]=s),e},t.prototype.toCSS=function(){var t=this.toCSSObject(),e=[];for(var r in t)e.push(r+":"+t[r]+";");return e.join("")},t.prototype._set=function(t,e){for(var r=this.properties,i=t.length,s=0;s<i-1;++s){var a=t[s];!(a in r)&&(r[a]={}),r=r[a]}i&&(r[t[i-1]]=n.isString(e)?o.toPropertyObject(e):e)},t}();e.default=p},function(t,e,r){"use strict";e.__esModule=!0;var i=r(11),n=r(12),o=r(5);function s(t){for(var e=t.split(/("[^"]*"|'[^']*'|[^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\s+/g),r=e.length,i=[],n=0,s=0;s<r;++s){var a=e[s];if(o.isUndefined(a))i[n]&&++n;else if(a){var u=i[n];i[n]=u?u+a:a}}return i}function a(t){for(var e=t.split(/("[^"]*"|'[^']*'|[^,\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^,\s()]*)|\s*,\s*/g),r=e.length,i=[],n=0,s=0;s<r;++s){var a=e[s];if(o.isUndefined(a))i[n]&&++n;else if(a){var u=i[n];i[n]=u?u+a:a}}return i}function u(t){return 3===t.length&&(t[3]=1),new i.default(t,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"})}function f(t){var e;if(t instanceof i.default)e=t;else if(o.isArray(t))e=u(t);else if(o.isString(t))return c(t);var r=e.value,s=r.length;4===s?r[3]=parseFloat(r[3]):3===s&&(r[3]=1),e.setOptions({type:"color"});var a=e.getOption("model").toLowerCase();switch("rgb"===a&&e.setOptions({type:"color",model:"rgba",prefix:"rgba(",suffix:")"}),a){case"rgb":case"rgba":for(var f=0;f<3;++f)r[f]=parseInt(r[f],10);break;case"hsl":case"hsla":for(f=1;f<3;++f)-1!==r[f].indexOf("%")&&(r[f]=parseFloat(r[f])/100);return u(r=n.hslToRGB(r))}return e}function p(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);if(!e||e.length<4)return t;var r,o=e[1]||"",s=o+"(",a=e[2],u=")"+e[3],p=",",h=l(a);h instanceof i.default?(p=h.getOption("separator"),r=h.value):r=[a];var c=new i.default(r,{separator:p,model:o,prefix:s,suffix:u});return-1!==n.COLOR_MODELS.indexOf(o)?f(c):c}function h(t,e){return new i.default(t,{type:"array",separator:e})}function c(t){if("#"===t.charAt(0))return u(4===t.length?n.hexToRGB(n.hex3to6(t)):(t.length,n.hexToRGB(t)));if(-1!==t.indexOf("("))return p(t);throw new Error("Invalid Format : Not a Color - "+t)}function l(t){if(!o.isString(t))return Array.isArray(t)?h(t,","):t;var e=a(t);if(e.length>1)return h(e.map(function(t){return l(t)}),",");if((e=s(t)).length>1)return h(e.map(function(t){return l(t)})," ");var r=t.charAt(0);return!r||'"'!==r&&"'"!==r?-1!==t.indexOf("(")?p(t):"#"===t.charAt(0)?c(t):t:t}e.splitSpace=s,e.splitComma=a,e.splitStyle=function(t){for(var e,r=t.split(";"),i=r.length,n=[],o=0;o<i;++o){var s=/([^:]*):([\S\s]*)/g.exec(r[o]);!s||s.length<3||!s[1]||n.push(((e={})[s[1].trim()]=l(s[2].trim()),e))}return n},e.arrayToColorObject=u,e.toColorObject=f,e.stringToBracketObject=p,e.arrayToPropertyObject=h,e.stringToColorObject=c,e.toPropertyObject=l,e.toObject=function t(e,r){void 0===r&&(r={});var i=e.getOption("model");if(i){e.setOptions({model:"",suffix:"",prefix:""});var n=e.size()>1?e:e.get(0);r[i]=n}else e.forEach(function(e){return t(e,r)});return r}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(5),n=function(){function t(t,e){void 0===e&&(e={}),this.options={prefix:"",suffix:"",model:"",type:"",separator:","},this.setOptions(e),this.init(t)}return t.prototype.setOptions=function(t){return Object.assign(this.options,t),this},t.prototype.getOption=function(t){return this.options[t]},t.prototype.size=function(){return this.value.length},t.prototype.get=function(t){return this.value[t]},t.prototype.set=function(t,e){return this.value[t]=e,this},t.prototype.clone=function(){return new t(this.value.map(function(e){return e instanceof t?e.clone():e}),{separator:this.options.separator,prefix:this.options.prefix,suffix:this.options.suffix,model:this.options.model,type:this.options.type})},t.prototype.toValue=function(){return this.options.prefix+this.join()+this.options.suffix},t.prototype.join=function(){return this.value.map(function(e){return e instanceof t?e.toValue():e}).join(this.options.separator)},t.prototype.forEach=function(t){return this.value.forEach(t),this},t.prototype.init=function(t){return i.isString(t)?this.value=t.split(this.options.separator):i.isObject(t)?this.value=t:this.value=[t],this},t}();e.default=n},function(t,e,r){"use strict";function i(t){return"#"===t.charAt(0)?t.substring(1):t}e.__esModule=!0,e.COLOR_MODELS=["rgb","rgba","hsl","hsla"],e.cutHex=i,e.hexToRGB=function(t){var e=i(t),r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),s=parseInt(e.substring(6,8),16)/255;return isNaN(s)&&(s=1),[r,n,o,s]},e.hex3to6=function(t){var e=t.charAt(1),r=t.charAt(2),i=t.charAt(3);return["#",e,e,r,r,i,i].join("")},e.hslToRGB=function(t){var e=t[0],r=t[1],i=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var n,o=(1-Math.abs(2*i-1))*r,s=o*(1-Math.abs(e/60%2-1)),a=i-o/2;e<60?n=[o,s,0]:e<120?n=[s,o,0]:e<180?n=[0,o,s]:e<240?n=[0,s,o]:e<300?n=[s,0,o]:e<360&&(n=[o,0,s]);var u=[Math.round(255*(n[0]+a)),Math.round(255*(n[1]+a)),Math.round(255*(n[2]+a))];return t.length>3&&(u[3]=t[3]),u}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(5),n=r(11);var o=function(){function t(){this.times=[],this.items={},this.names={}}return t.prototype.getNames=function(){return function t(e,r){var n=[];for(var o in e)r.push(o),i.isObject(e[o])?n=n.concat(t(e[o],r)):n.push(r.slice()),r.pop();return n}(this.names,[])},t.prototype.update=function(){var t=this.items;for(var e in t)this.updateFrame(t[e]);return this},t.prototype.forEach=function(t){var e=this.times,r=this.items;e.forEach(function(e){t(r[e],e,r)})},t.prototype.updateFrame=function(t){if(!t)return this;var e=t.properties;return function t(e,r){for(var o in r){var s=r[o];!i.isObject(s)||i.isArray(s)||s instanceof n.default?e[o]=!0:(i.isObject(e[o])||(e[o]={}),t(e[o],r[o]))}}(this.names,e),this},t.prototype.getDuration=function(){var t=this.times;return 0===t.length?0:t[t.length-1]},t.prototype.setDuration=function(t,e){void 0===e&&(e=this.getDuration());var r=t/e,i=this.times,n=this.items,o={};this.times=i.map(function(t){var e=t*r;return o[e]=n[t],e}),this.items=o},t.prototype.size=function(){return this.times.length},t.prototype.add=function(t,e){return this.items[t]=e,this.addTime(t),this},t.prototype.has=function(t){return t in this.items},t.prototype.get=function(t){return this.items[t]},t.prototype.remove=function(t){return delete this.items[t],this.removeTime(t),this},t.prototype.addTime=function(t){for(var e=this.times,r=e.length,i=r,n=0;n<r;++n){if(t===e[n])return this;if(t<e[n]){i=n;break}}return this.times.splice(i,0,t),this},t.prototype.removeTime=function(t){var e=this.times.indexOf(t);return e>-1&&this.times.splice(e,1),this},t}();e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var i=r(5),n=r(11);function o(t){var e=typeof t;if("object"===e){if(i.isArray(t))return"array";if(t instanceof n.default)return"property"}return e}function s(t,e,r,n){if(0===n)return e;if(!i.isArray(e))return t;var o=e.length;return t.map(function(t,i){return i>=o?t:f(t,e[i],r,n)})}function a(t,e,r,i){if(0===i)return e;var o=t.value,a=e.value,u=t.getOption("model");if(u!==e.getOption("model"))return f(t.toValue(),e.toValue(),r,i);3===o.length&&(o[3]=1),3===a.length&&(a[3]=1);for(var p=s(o,a,r,i),h=u,c=0;c<3;++c)p[c]=parseInt(p[c],10);return new n.default(p,{type:"color",model:h,prefix:h+"(",suffix:")"})}function u(t,e,r,i){var o=t.getOption("type");if("color"===o)return a(t,e,r,i);var u=s(t.value,e.value,r,i);return new n.default(u,{type:o,separator:t.getOption("separator")||e.getOption("separator"),prefix:t.getOption("prefix")||e.getOption("prefix"),suffix:t.getOption("suffix")||e.getOption("suffix"),model:t.getOption("model")||e.getOption("model")})}function f(t,e,r,n){if(0===n)return e;if(0===r)return t;var a=o(t);if(a!==o(e))return t;if("property"===a)return u(t,e,r,n);if("array"===a)return s(t,e,r,n);if("object"===a||"boolean"===a)return t;if(r+n===0)return t;var f=r/(r+n),p=1-f;if("number"===a)return t*p+e*f;if("string"!==a)return t;var h,c=i.splitUnit(t),l=i.splitUnit(e);if(isNaN(c.value)||isNaN(l.value))return f>=1?e:t;h=c.value*p+l.value*f;var d=c.unit||l.unit||!1;return!1===d?h:h+d.trim()}e.dotArray=s,e.dotColor=a,e.dotObject=u,e.dot=f,e.dotValue=function(t,e,r,i,n,o){if(t===e)return i;if(t===r)return n;if(!o)return f(i,n,t-e,r-t);var s=o((t-e)/(r-e));return f(i,n,s,1-s)}},function(t,e,r){"use strict";e.__esModule=!0,e.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},e.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},e.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}},e.fromCSS=function(t,e){if(!t||!e||!e.length)return{};var r;if(t instanceof Element)r=t;else{if(!t.length)return{};r=t[0]}for(var i={},n=window.getComputedStyle(r),o=e.length,s=0;s<o;++s)i[e[s]]=n[e[s]];return i}}])});