/*!
 * Copyright (c) 2018 Daybrush
 * license: MIT
 * author: Daybrush
 * repository: https://github.com/daybrush/scenejs.git
 * @version 1.0.0-beta
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scene",[],e):"object"==typeof exports?exports.Scene=e():t.Scene=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var i=r(1),n=i;for(var o in n)i.default[o]=n[o];t.exports=i.default},function(t,e,r){"use strict";e.__esModule=!0;var i=r(2),n=r(9);e.SceneItem=n.default;var o=r(10);e.Frame=o.default;var s=r(13);e.Keyframes=s.default;var a=r(8);e.PropertyObject=a.default;var u=r(5);e.easing=u;var f=r(3);e.Animator=f.default;var p=r(16);e.presets=p;var c=r(6);e.setRole=c.setRole,e.setAlias=c.setAlias,e.default=i.default},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(3),s=r(9),a=r(7),u=r(6),f=function(t){function e(e,r){var i=t.call(this)||this;return i.items={},i.load(e,r),i}return n(e,t),e.prototype.setId=function(t){return void 0===t&&(t="scene"+Math.floor(1e5*Math.random())),this.state.id=t,this},e.prototype.getId=function(){return this.state.id},e.prototype.getDuration=function(){var t=this.items,e=0;for(var r in t){var i=t[r];e=Math.max(e,i.getTotalDuration()/i.getPlaySpeed())}return e},e.prototype.setDuration=function(t){var e=this.items,r=this.getDuration();if(0===t||!isFinite(r))return this;if(0===r)for(var i in e){(o=e[i]).setDuration(t)}else{var n=t/r;for(var i in e){var o;(o=e[i]).setDelay(o.getDelay()*n),o.setDuration(o.getDuration()*n)}}return this},e.prototype.getItem=function(t){return this.items[t]},e.prototype.newItem=function(t,e){if(void 0===e&&(e={}),u.has(this.items,t))return this.items[t];var r=new s.default;return this.setItem(t,r),r.setOptions(e),r},e.prototype.setItem=function(t,e){return e instanceof o.default&&e.setId(t),this.items[t]=e,this},e.prototype.animate=function(e,r){return t.prototype.setTime.call(this,e),this._animate(r)},e.prototype.setTime=function(e,r){return t.prototype.setTime.call(this,e),this._animate(r),this},e.prototype.forEach=function(t){var e=this.items;for(var r in e)t(e[r],r,e);return this},e.prototype.exportCSS=function(t,e){void 0===t&&(t=this.getDuration());var r=this.items,i=t;for(var n in i&&isFinite(i)||(i=0),r){r[n].exportCSS(i,this.state)}return this},e.prototype.append=function(t){t.setDelay(t.getDelay()+this.getDuration()),this.setItem(t.getId()||t.setId().getId(),t)},e.prototype.playCSS=function(t,e){var r=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!a.ANIMATION||"running"===this.getPlayState())return this;t&&this.exportCSS();var i,n=this.items;for(var o in n){var s=n[o];s.playCSS(!1,e),s.getState("playCSS")&&(i=s)}if(!i)return this;var u=function(t){var e=t.currentTime,i=t.iterationCount;r.state.currentTime=e,r.setCurrentIterationCount(i)},f=function(){r.end(),r.setState({playCSS:!1}),i.off("ended",f),i.off("iteration",u)};return i.on("ended",f),i.on("iteration",u),this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play"),this},e.prototype.load=function(t,r){void 0===t&&(t={}),void 0===r&&(r=t.options);var i=r&&r.selector;for(var n in t)if("options"!==n){var o=t[n],a=void 0;o instanceof e||o instanceof s.default?(this.setItem(n,o),a=o):(a=this.newItem(n)).load(o),i&&a.setSelector(n)}this.setOptions(r)},e.prototype.setSelector=function(t){var e=this.options.selector;this.forEach(function(t,r){t.setSelector(!!e&&r)})},e.prototype._animate=function(t){var e=this.getIterationTime(),r=this.items,i=this.getEasing()||t,n={};for(var o in r){var s=r[o];n[o]=s.animate(e*s.getPlaySpeed(),i)}return this.trigger("animate",{currentTime:this.getTime(),time:e,frames:n}),n},e.VERSION="#__VERSION__#",e}(o.default);e.default=f},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(4),s=r(5),a=r(6),u=0,f=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var e=Date.now(),r=Math.max(0,16-(e-u)),i=window.setTimeout(function(){t(e+r)},1e3/60);return u=e+r,i};function p(t,e){return"reverse"===e||e===(t%2>=1?"alternate":"alternate-reverse")}e.isDirectionReverse=p;var c=function(t){function e(e){var r=t.call(this)||this;return r.options={},r.state={id:"",easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:"normal",playSpeed:1,currentTime:0,currentIterationTime:-1,currentIterationCount:0,prevTime:0,playState:"paused",duration:0},r.setOptions(e),r}return n(e,t),e.prototype.setEasing=function(t){return this.setState(Array.isArray(t)?{easingName:"cubic-bezier("+t.join(",")+")",easing:s.bezier(t[0],t[1],t[2],t[3])}:{easing:t,easingName:t.easingName||"linear"}),this},e.prototype.setOptions=function(t){if(!t)return this;for(var e in t){var r=t[e];"easing"!==e?"duration"!==e?(e in this.state?this.state:this.options)[e]=r:r&&this.setDuration(r):this.setEasing(r)}return this},e.prototype.getTotalDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.state.delay+this.getActiveDuration()},e.prototype.getActiveDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.getDuration()*this.state.iterationCount},e.prototype.isEnded=function(){return 0===this.getTime()&&"paused"===this.state.playState||!(this.getTime()<this.getTotalDuration())},e.prototype.isPaused=function(){return"paused"===this.state.playState},e.prototype.setNext=function(t){return this.on("ended",function(){t.play()}),this},e.prototype.play=function(){var t=this;return this.isEnded()&&this.setTime(0),this.state.playState="running",f(function(e){t.state.prevTime=e,t.tick(e)}),this.trigger("play"),this},e.prototype.pause=function(){return this.state.playState="paused",this.trigger("paused"),this},e.prototype.end=function(){return this.pause(),this.trigger("ended"),this},e.prototype.reset=function(){return this.setTime(0),this.pause(),this},e.prototype.setTime=function(t){var e=this.getTotalDuration(),r=t;return r<0?r=0:r>e&&(r=e),this.state.currentTime=r,this.calculateIterationTime(),this.trigger("timeupdate",{currentTime:r,time:this.getIterationTime(),iterationCount:this.getIterationCount()}),this},e.prototype.getState=function(t){return this.state[t]},e.prototype.setState=function(t){for(var e in t)this.state[e]=t[e];return this},e.prototype.getTime=function(){return this.state.currentTime},e.prototype.getActiveTime=function(){return a.toFixed(Math.max(this.state.currentTime-this.state.delay,0))},e.prototype.getIterationTime=function(){return this.state.currentIterationTime},e.prototype.setCurrentIterationCount=function(t){var e=this.state,r=Math.floor(t);return e.currentIterationCount<r&&this.trigger("iteration",{currentTime:e.currentTime,iterationCount:r}),e.currentIterationCount=t,this},e.prototype.setIterationTime=function(t){return this.state.currentIterationTime=t,this},e.prototype.calculateIterationTime=function(){var t=this.state,e=t.iterationCount,r=t.fillMode,i=t.direction,n=t.currentTime,o=t.delay,s=this.getDuration(),a=this.getActiveTime(),u=0===s?0:a/s,f=s?a%s:0;if(n-o<0||!u)return this.setIterationTime(0),this;this.setCurrentIterationCount(u);var c=p(u,i);(c&&(f=s-f),"infinite"!==e)&&(u>=e&&(f=s*("both"===r||"forwards"===r?e%1||1:0),c&&(f=s-f)));return this.setIterationTime(f),this},e.prototype.caculateEasing=function(t){if(!this.state.easing)return t;var e=this.getDuration();return(0,this.state.easing)(0===e?0:t/e)*t},e.prototype.tick=function(t){var e=this,r=this.state,i=r.playSpeed,n=r.prevTime,o=this.getTime()+Math.min(1e3,t*i-n)/1e3;r.prevTime=t*i,this.setTime(o),this.isEnded()&&this.end(),"paused"!==r.playState&&f(function(t){e.tick(t)})},e}(o.default),h=c.prototype;a.defineGetterSetter(h,"delay","state"),a.defineGetterSetter(h,"fillMode","state"),a.defineGetterSetter(h,"iterationCount","state"),a.defineGetterSetter(h,"direction","state"),a.defineGetterSetter(h,"playState","state"),a.defineGetterSetter(h,"playSpeed","state"),a.defineGetterSetter(h,"duration","state"),a.defineGetter(h,"easingName","state"),a.defineGetter(h,"easing","state"),e.default=c},function(t,e,r){"use strict";e.__esModule=!0;var i=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var r=this,i=this.events;if("object"==typeof t){for(var n in t)this.on(n,t[n]);return this}return t in i||(i[t]=[]),e?"object"==typeof e?(e.forEach(function(e){return r.on(t,e)}),this):(i[t].push(e),this):this},t.prototype.off=function(t,e){if(t)if(e){var r=this.events[t];if(!r)return this;var i=r.indexOf(e);-1!==i&&r.splice(i,1)}else this.events[t]=[];else this.events={};return this},t.prototype.trigger=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var n=this.events;if(!(t in n))return this;var o=n[t];if(r.length){var s=r[0];s.type=t,s.currentTarget=this,!s.target&&(s.target=this)}return o.forEach(function(t){t.apply(e,r)}),this},t}();e.default=i},function(t,e,r){"use strict";function i(t,e,r){var i=1-r;return r*r*r+3*r*r*i*e+3*r*i*i*t}function n(t,e,r,n){var o=function(o){var s=function(t,e,r){for(var n=r,o=1;Math.abs(o)>.001;){if(o=i(t,e,n)-r,Math.abs(o)<.001)return n;n-=o/2}return n}(t,r,Math.max(Math.min(1,o),0));return i(e,n,s)};return o.easingName="cubic-bezier("+t+", "+e+", "+r+", "+n+")",o}e.__esModule=!0,e.bezier=n,e.LINEAR=n(0,0,1,1),e.EASE=n(.25,.1,.25,1),e.EASE_IN=n(.42,0,1,1),e.EASE_OUT=n(0,0,.58,1),e.EASE_IN_OUT=n(.42,0,.58,1)},function(t,e,r){"use strict";e.__esModule=!0;var i=r(7),n=r(8);function o(t,e,r){var i=e.length,n=t;if(0===i)return!1;for(var o=0;o<i;++o){if(!0===n)return!1;if(!(n=n[e[o]])||!r&&!0===n)return!1}return!0}function s(t){return Array.isArray(t)}function a(t){return t.replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})}function u(t,e,r){t[a("get "+e)]=function(){return(r?this[r]:this)[e]}}function f(t,e,r){t[a("set "+e)]=function(t){return r?this[r][e]=t:this[e]=t,this}}e.setAlias=function(t,e){i.ALIAS[t]=e},e.setRole=function(t,e,r){for(var n=t.length,o=i.ROLES,s=i.FIXED,a=0;a<n-1;++a)!o[t[a]]&&(o[t[a]]={}),o=o[t[a]],r&&(!s[t[a]]&&(s[t[a]]={}),s=s[t[a]]);r&&(s[t[n-1]]=!0),o[t[n-1]]=!!e||{}},e.getType=function(t){var e=typeof t;if("object"===e){if(s(t))return"array";if(t instanceof n.default)return"property"}else if("string"===e||"number"===e)return"value";return e},e.toFixed=function(t){return Math.round(t*i.MAXIMUM)/i.MAXIMUM},e.isInProperties=o,e.isRole=function(t,e){return o(i.ROLES,t,e)},e.isFixed=function(t){return o(i.FIXED,t,!0)},e.isUndefined=function(t){return void 0===t},e.isObject=function(t){return t&&"object"==typeof t},e.isArray=s,e.isString=function(t){return"string"==typeof t},e.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.splitUnit=function(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],i=e[2];return{prefix:r,unit:e[3],value:parseFloat(i)}},e.camelize=a,e.decamelize=function(t){return t.replace(/([a-z])([A-Z])/g,function(t,e,r){return e+"-"+r.toLowerCase()})},e.defineGetter=u,e.defineSetter=f,e.defineGetterSetter=function(t,e,r){u(t,e,r),f(t,e,r)}},function(t,e,r){"use strict";e.__esModule=!0,e.PREFIX="__SCENEJS_",e.timingFunction="animation-timing-function",e.ROLES={transform:{},filter:{},attribute:{}},e.ALIAS={easing:["animation-timing-function"]},e.FIXED={"animation-timing-function":!0,contents:!0},e.MAXIMUM=1e6,e.THRESHOLD=1e-6;var i=["webkit","ms","moz","o"],n=function(t){var e=(document.body||document.documentElement).style,r=i.length;if(void 0!==e[t])return t;for(var n=0;n<r;++n){var o="-"+i[n]+"-"+t;if(void 0!==e[o])return o}return""};e.TRANSFORM=n("transform"),e.FILTER=n("filter"),e.ANIMATION=n("animation"),e.KEYFRAMES=e.ANIMATION.replace("animation","keyframes"),e.START_ANIMATION="startAnimation"},function(t,e,r){"use strict";e.__esModule=!0;var i=function(){function t(t,e){void 0===e&&(e={}),this.options={prefix:"",suffix:"",model:"",type:"",separator:","},this.setOptions(e),this.init(t)}return t.prototype.setOptions=function(t){return Object.assign(this.options,t),this},t.prototype.getOption=function(t){return this.options[t]},t.prototype.size=function(){return this.value.length},t.prototype.get=function(t){return this.value[t]},t.prototype.set=function(t,e){return this.value[t]=e,this},t.prototype.clone=function(){return new t(this.value.map(function(e){return e instanceof t?e.clone():e}),{separator:this.options.separator,prefix:this.options.prefix,suffix:this.options.suffix,model:this.options.model,type:this.options.type})},t.prototype.toValue=function(){return this.options.prefix+this.join()+this.options.suffix},t.prototype.join=function(){return this.value.map(function(e){return e instanceof t?e.toValue():e}).join(this.options.separator)},t.prototype.forEach=function(t){return this.value.forEach(t),this},t.prototype.init=function(t){var e=typeof t;return this.value="string"===e?t.split(this.options.separator):"object"===e?t:[t],this},t}();e.default=i},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});e.__esModule=!0;var o=r(3),s=r(10),a=r(6),u=r(13),f=r(14),p=r(7),c=r(15);function h(t){return t.match(/[0-9a-zA-Z]+/g).join("")}function l(t){var e=[];for(var r in t)e.push(p.ANIMATION+"-"+a.decamelize(r)+" : "+t[r]+";");return e.join("")}var d=function(t){function e(e,r){var i=t.call(this)||this;return i.keyframes=new u.default,i.elements=[],i.load(e,r),i}return n(e,t),e.prototype.getDuration=function(){return Math.max(this.state.duration,this.keyframes.getDuration())},e.prototype.setDuration=function(e){if(0===e)return this;var r=this.getDuration();return r>0&&this.keyframes.setDuration(e,r),t.prototype.setDuration.call(this,a.toFixed(e)),this},e.prototype.setId=function(t){var e=this.elements,r=e.length;this.setState({id:t||function(t){for(;;){var e=""+Math.floor(1e5*Math.random());if(!t)return e;if(!document.querySelector('[data-scene-id="'+e+'"]'))return e}}(!!r)});var i=h(this.getId());if(this.options.selector||(this.options.selector='[data-scene-id="'+i+'"]'),!r)return this;for(var n=0;n<r;++n)e[n].setAttribute("data-scene-id",i);return this},e.prototype.getId=function(){return this.state.id},e.prototype.set=function(t){for(var r=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(a.isObject(t))return this.load(t),this;if(i[0]){if(i[0]instanceof e){var o=i[0],s=o.getDelay(),u=this._getTime(t)+s,f=o.getAllTimes(!!s||!this.hasFrame(t)),p=f.keys,c=f.values,h=f.frames,l=this.getEasingName()!==o.getEasingName()?o.getEasing():0;return p.forEach(function(t){r.set(u+t,h[c[t]])}),l&&(this.set(u+p[0],"easing",l),this.set(u+p[p.length-1],"easing","initial")),this}if(1===i.length&&a.isArray(i[0]))return i[0].forEach(function(e){r.set(t,e)}),this}var d=this.newFrame(t);return d.set.apply(d,i),this.updateFrame(d),this},e.prototype.get=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getFrame(t);return i&&i.get.apply(i,e)},e.prototype.remove=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=this.getFrame(t);return i&&i.remove.apply(i,e),this.update(),this},e.prototype.append=function(t){return this.set(this.getDuration(),t),this},e.prototype.prepend=function(t){if(t instanceof e){var r=t.getDelay(),i=("infinite"===t.getIterationCount()?t.getDuration():t.getActiveDuration())+r,n=this.keyframes.get(0);n&&this.keyframes.remove(0),this.keyframes.unshift(i),this.set(0,t),this.set(i+p.THRESHOLD,n)}else this.prepend(new e(t));return this},e.prototype.setSelector=function(t){return this.options.selector=!0===t?this.state.id:t||'[data-scene-id="'+this.state.id+'"]',this.setElement(document.querySelectorAll(this.options.selector)),this},e.prototype.setElement=function(t){return t?(this.elements=t instanceof Element?[t]:t,this.setId(),this):this},e.prototype.setCSS=function(t,e){return this.set(t,c.fromCSS(this.elements,e)),this},e.prototype.animate=function(e,r){return t.prototype.setTime.call(this,e),this._animate(r)},e.prototype.setTime=function(e,r){return t.prototype.setTime.call(this,e),this._animate(r),this},e.prototype.update=function(){return this.keyframes.update(),this},e.prototype.updateFrame=function(t){return this.keyframes.updateFrame(t),this},e.prototype.newFrame=function(t){var e=this.getFrame(t);return e||(e=new s.default,this.setFrame(t,e),e)},e.prototype.setFrame=function(t,e){return this.keyframes.add(this._getTime(t),e),this.keyframes.update(),this},e.prototype.getFrame=function(t){return this.keyframes.get(this._getTime(t))},e.prototype.hasFrame=function(t){return this.keyframes.has(this._getTime(t))},e.prototype.removeFrame=function(t){var e=this.keyframes;return e.remove(t),e.update(),this},e.prototype.copyFrame=function(t,e){if(a.isObject(t)){for(var r in t)this.copyFrame(r,t[r]);return this}var i=this.getFrame(t);if(!i)return this;var n=i.clone();return this.setFrame(e,n),this},e.prototype.mergeFrame=function(t,e){if(a.isObject(t)){for(var r in t)this.mergeFrame(r,t[r]);return this}var i=this.getFrame(t);return i?(this.newFrame(e).merge(i),this):this},e.prototype.getNowFrame=function(t,e){var r=this,i=new s.default,n=this.keyframes.getNames(),o=this._getNearTimeIndex(t),u=o.left,f=o.right,p=this._getEasing(t,u,f,this.state.easing||e);return n.forEach(function(e){var n=r._getNowValue(t,u,f,e,p);a.isUndefined(n)||i.set(e,n)}),i},e.prototype.load=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=t.options),a.isArray(t))for(var r=t.length,i=0;i<r;++i){var n=1===r?0:this._getTime(i/(r-1)*100+"%");this.set(n,t[i])}else if(t.keyframes)this.set(t.keyframes);else for(var n in t)if("options"!==n&&"keyframes"!==n){var o=t[n],s=this._getTime(n);"number"!=typeof o?this.set(s,o):this.mergeFrame(o,s)}return e&&this.setOptions(e),this},e.prototype.clone=function(t){void 0===t&&(t={});var r=new e;return r.setOptions(this.state),r.setOptions(t),this.keyframes.forEach(function(t,e){return r.setFrame(e,t.clone())}),r},e.prototype.setOptions=function(e){void 0===e&&(e={}),t.prototype.setOptions.call(this,e);var r=e.id,i=e.selector,n=e.duration,o=e.elements;return n&&this.setDuration(n),r&&this.setId(r),o?this.setElement(o):i&&this.setSelector(!0===i?this.state.id:i),this},e.prototype.getAllTimes=function(t,e){void 0===t&&(t=!0),void 0===e&&(e={});var r=this.keyframes.times.slice(),i=r.length,n=[],s={};if(!i)return{keys:[],values:{},frames:{}};var u={},f=this.getDuration(),c=e.direction||this.state.direction,h="alternate"===c||"alternate-reverse"===c;!this.getFrame(0)&&r.unshift(0),!this.getFrame(f)&&r.push(f),i=r.length;for(var l=e.iterationCount||this.state.iterationCount,d=(l="infinite"!==l?l:1)*f,v=0;v<l;++v)for(var m=o.isDirectionReverse(v,c),g=v*f,y=0;y<i;++y)if(!h||0===v||0!==y){var S=0!==y||(0===v?t:h)?0:p.THRESHOLD,_=m?r[i-1-y]:r[y],T=a.toFixed(m?f-_:_),O=a.toFixed(g+T+S);if(d<O)break;if(n.push(O),s[O]=_,!u[_]){var I=this.getFrame(_);0===y||y===i-1||I.has("transform")||I.has("filter")?u[_]=this.getNowFrame(_):u[_]=I}}if(n[n.length-1]<d){m=o.isDirectionReverse(l,c),_=a.toFixed(f*(m?1-l%1:l%1));n.push(d),s[d]=_,!u[_]&&(u[_]=this.getNowFrame(_))}return{keys:n,values:s,frames:u}},e.prototype.toCSS=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var r=this.state,i=r.selector||this.options.selector;if(!i)return"";var n=this._getId(),o=0===t,s=e.playSpeed||1,a=((void 0===e.delay?r.delay:e.delay)||0)/s,u=!o&&e.easing&&e.easingName||r.easingName,f=!o&&e.iterationCount||r.iterationCount,c=l({fillMode:"forwards"!==e.fillMode&&e.fillMode||r.fillMode,direction:"normal"!==e.direction&&e.direction||r.direction,delay:a+"s",name:p.PREFIX+"KEYFRAMES_"+h(n),duration:t/s+"s",timingFunction:u,iterationCount:f});return i+"."+p.START_ANIMATION+" {\n\t\t\t"+c+"\n\t\t}\n\t\t"+this._toKeyframes(t,e)},e.prototype.exportCSS=function(t,e){if(void 0===t&&(t=this.getDuration()),void 0===e&&(e={}),this.elements.length){var r=this._getId(),i=document.querySelector("#"+p.PREFIX+r),n=this.toCSS(t,e);i?i.innerText=n:document.body.insertAdjacentHTML("beforeend",'<style id="'+p.PREFIX+"STYLE_"+r+'">'+n+"</style>")}},e.prototype.playCSS=function(t,e){var r=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!p.ANIMATION||"running"===this.getPlayState())return this;var i=this.elements,n=i.length;if(!n)return this;this.isEnded()&&this.setTime(0),t&&this.exportCSS();for(var o=l(e),s=0;s<n;++s){var a=i[s];a.style.cssText+=o,c.hasClass(a,p.START_ANIMATION)?(c.removeClass(a,p.START_ANIMATION),function(t){requestAnimationFrame(function(){requestAnimationFrame(function(){c.addClass(t,p.START_ANIMATION)})})}(a)):c.addClass(a,p.START_ANIMATION)}this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play");var u=this.getDuration(),f=i[0],h=function(){r.end(),f&&(f.removeEventListener("animationend",h),f.removeEventListener("animationiteration",d))},d=function(t){var e=t.elapsedTime,i=e/u;r.state.currentTime=e,r.setCurrentIterationCount(i)};return f.addEventListener("animationend",h),f.addEventListener("animationiteration",d),this},e.prototype._getId=function(){return this.state.id||this.setId().getId()},e.prototype._getEasing=function(t,e,r,i){if(this.keyframes.hasName(p.timingFunction)){var n=this._getNowValue(t,e,r,[p.timingFunction],0,!0);return"function"==typeof n?n:i}return i},e.prototype._getTime=function(t){var e=this.getDuration()||100;if(a.isString(t)){if("from"===t)return 0;if("to"===t)return e;var r=a.splitUnit(t),i=r.unit,n=r.value;return"%"===i?(!this.getDuration()&&(this.state.duration=e),parseFloat(t)/100*e):">"===i?n+p.THRESHOLD:n}return a.toFixed(t)},e.prototype._toKeyframes=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var r=this._getId(),i=this.state,n=i.playSpeed,o=void 0!==e.iterationCount,s=i.iterationCount,a=o?i.delay:0,u=o?i.direction:"normal",f=this.getAllTimes(!0,{duration:t,delay:a,direction:u,iterationCount:o&&"infinite"!==s?s:1,isCSS:!0}),c=f.keys,l=f.values,d=f.frames,v=c.length,m={},g=[];for(var y in d)m[y]=d[y].toCSS();if(!c.length)return"";a&&(g.push("0%{"+d[0]+"}"),"reverse"!==u&&"alternate-reverse"!==u||g.push(a/n/t*100-1e-5+"%{"+m[0]+"}")),c.forEach(function(e){g.push((a+e)/n/t*100+"%{"+m[l[e]]+"}")});var S=c[v-1];return(a+S)/n<t&&g.push("100%{"+m[l[S]]),"@"+p.KEYFRAMES+" "+p.PREFIX+"KEYFRAMES_"+h(r)+"{\n\t\t\t"+g.join("\n")+"\n\t\t}"},e.prototype._getNowValue=function(t,e,r,i,n,o){void 0===n&&(n=this.state.easing),void 0===o&&(o=a.isFixed(i));for(var s,u,p,c,h=this.keyframes,l=h.times,d=l.length,v=e;v>=0;--v){if((g=h.get(l[v])).has.apply(g,i)){s=l[v],p=g;break}}var m=p&&p.raw.apply(p,i);if(o)return m;for(v=r;v<d;++v){var g;if((g=h.get(l[v])).has.apply(g,i)){u=l[v],c=g;break}}var y=c&&c.raw.apply(c,i);return!p||a.isUndefined(m)?y:!c||a.isUndefined(y)||m===y?m:(s<0&&(s=0),f.dotValue(t,s,u,m,y,n))},e.prototype._getNearTimeIndex=function(t){for(var e=this.keyframes.times,r=e.length,i=0;i<r;++i){if(e[i]===t)return{left:i,right:i};if(e[i]>t)return{left:0===i?0:i-1,right:i}}return{left:r-1,right:r-1}},e.prototype._animate=function(t){var e=this.getIterationTime(),r=this.getEasing()||t,i=this.getNowFrame(e,r),n=this.getTime();this.trigger("animate",{frame:i,currentTime:n,time:e});var o=this.elements,s=o.length;if(!s)return i;var a=i.get("attribute");if(a)for(var u in a)for(var f=0;f<s;++f)o[f].setAttribute(u,a[u]);var p=i.toCSS();if(this.state.cssText!==p){this.state.cssText=p;for(f=0;f<s;++f)o[f].style.cssText+=p;return i}},e}(o.default);e.default=d},function(t,e,r){"use strict";e.__esModule=!0;var i=r(7),n=r(6),o=r(11),s=r(8);function a(t){if(!t)return"";var e=[];for(var r in t)e.push(r+"("+t[r]+")");return e.join(" ")}function u(t,e){return void 0===e&&(e=!1),f({},t,e)}function f(t,e,r){for(var i in void 0===r&&(r=!1),e){var o=e[i],a=n.getType(o);"property"===a?t[i]=r?o.toValue():o.clone():"array"===a?t[i]=o.slice():"object"===a?!n.isObject(t[i])||t[i]instanceof s.default?t[i]=u(o,r):f(t[i],o,r):t[i]=e[i]}return t}var p=function(){function t(t){void 0===t&&(t={}),this.properties={},this.set(t)}return t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.raw.apply(this,t),i=n.getType(r);return"property"===i?r.toValue():"object"===i?u(r,!0):r},t.prototype.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=this.properties,o=(t[0]in i.ALIAS?i.ALIAS[t[0]]:t),s=o.length,a=0;a<s;++a){if(!n.isObject(r))return;r=r[o[a]]}return r},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.properties,o=t[0]in i.ALIAS?i.ALIAS[t[0]]:t,s=o.length;if(!s)return this;for(var a=0;a<s-1;++a){if(!n.isObject(r))return this;r=r[o[a]]}return delete r[o[s-1]],this},t.prototype.set=function(){for(var e=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var u=r.length,f=r.slice(0,-1),p=r[u-1];if(f[0]in i.ALIAS)this._set(i.ALIAS[f[0]],p);else if(2===u&&n.isArray(f[0]))this._set(f[0],p);else if(n.isObject(p))if(n.isArray(p))this._set(f,p);else if(function(t){return t instanceof s.default}(p))n.isRole(f)?this.set.apply(this,f.concat([o.toObject(p)])):this._set(f,p);else if(p instanceof t)this.merge(p);else for(var c in p)this.set.apply(this,f.concat([c,p[c]]));else if(n.isString(p)){if(n.isRole(f)){var h=o.toPropertyObject(p);return n.isObject(h)&&this.set.apply(this,f.concat([h])),this}var l=o.splitStyle(p);if(l.forEach(function(t){e.set.apply(e,f.concat([t]))}),l.length)return this;this._set(f,p)}else this._set(f,p);return this},t.prototype.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.properties,o=t[0]in i.ALIAS?i.ALIAS[t[0]]:t,s=o.length;if(!s)return!1;for(var a=0;a<s;++a){if(!(n.isObject(r)&&o[a]in r))return!1;r=r[o[a]]}return!0},t.prototype.clone=function(){var e=new t;return e.merge(this),e},t.prototype.merge=function(t){var e=this.properties,r=t.properties;return r?(f(e,r),this):this},t.prototype.toObject=function(){return u(this.properties,!0)},t.prototype.toCSSObject=function(){var t=this.toObject(),e={};for(var r in t)if(!n.isRole([r],!0)){var o=t[r];r!==i.timingFunction?e[r]=o:e[i.timingFunction.replace("animation",i.ANIMATION)]=(n.isString(o)?o:o.easingName)||"initial"}var s=a(t.transform),u=a(t.filter);return i.TRANSFORM&&s&&(e[i.TRANSFORM]=s),i.FILTER&&u&&(e[i.FILTER]=u),e},t.prototype.toCSS=function(){var t=this.toCSSObject(),e=[];for(var r in t)e.push(r+":"+t[r]+";");return e.join("")},t.prototype._set=function(t,e){for(var r=this.properties,i=t.length,s=0;s<i-1;++s){var a=t[s];!(a in r)&&(r[a]={}),r=r[a]}i&&(r[t[i-1]]=n.isString(e)?o.toPropertyObject(e):e)},t}();e.default=p},function(t,e,r){"use strict";e.__esModule=!0;var i=r(8),n=r(12),o=r(6);function s(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}function a(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}function u(t){return 3===t.length&&(t[3]=1),new i.default(t,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"})}function f(t){var e;if(t instanceof i.default)e=t;else if(o.isArray(t))e=u(t);else if(o.isString(t))return h(t);var r=e.value,s=r.length;4===s?r[3]=parseFloat(r[3]):3===s&&(r[3]=1),e.setOptions({type:"color"});var a=e.getOption("model").toLowerCase();switch("rgb"===a&&e.setOptions({type:"color",model:"rgba",prefix:"rgba(",suffix:")"}),a){case"rgb":case"rgba":for(var f=0;f<3;++f)r[f]=parseInt(r[f],10);break;case"hsl":case"hsla":for(f=1;f<3;++f)-1!==r[f].indexOf("%")&&(r[f]=parseFloat(r[f])/100);return u(r=n.hslToRGB(r))}return e}function p(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);if(!e||e.length<4)return t;var r,o=e[1]||"",s=e[2],a=o+"(",u=")"+e[3],p=",",c=l(s);c instanceof i.default?(p=c.getOption("separator"),r=c.value,a+=c.getOption("prefix"),u=c.getOption("suffix")+u):r=[s];var h=new i.default(r,{separator:p,model:o,prefix:a,suffix:u});return-1!==n.COLOR_MODELS.indexOf(o)?f(h):h}function c(t,e){return new i.default(t,{type:"array",separator:e})}function h(t){if("#"===t.charAt(0))return u(4===t.length?n.hexToRGB(n.hex3to6(t)):n.hexToRGB(t));if(-1!==t.indexOf("("))return p(t);throw new Error("Invalid Format : Not a Color - "+t)}function l(t){if(!o.isString(t))return Array.isArray(t)?c(t,","):t;var e=a(t);return e.length>1?c(e.map(function(t){return l(t)}),","):(e=s(t)).length>1?c(e.map(function(t){return l(t)})," "):(e=/^(['"])([^'"]*)(['"])$/g.exec(t))&&e[1]===e[3]?new i.default([l(e[2])],{prefix:e[1],suffix:e[1]}):-1!==t.indexOf("(")?p(t):"#"===t.charAt(0)?h(t):t}e.splitSpace=s,e.splitComma=a,e.splitStyle=function(t){for(var e,r=t.split(";"),i=r.length,n=[],o=0;o<i;++o){var s=/([^:]*):([\S\s]*)/g.exec(r[o]);!s||s.length<3||!s[1]||n.push(((e={})[s[1].trim()]=l(s[2].trim()),e))}return n},e.arrayToColorObject=u,e.toColorObject=f,e.stringToBracketObject=p,e.arrayToPropertyObject=c,e.stringToColorObject=h,e.toPropertyObject=l,e.toObject=function t(e,r){void 0===r&&(r={});var i=e.getOption("model");if(i){e.setOptions({model:"",suffix:"",prefix:""});var n=e.size()>1?e:e.get(0);r[i]=n}else e.forEach(function(e){return t(e,r)});return r}},function(t,e,r){"use strict";function i(t){return"#"===t.charAt(0)?t.substring(1):t}e.__esModule=!0,e.COLOR_MODELS=["rgb","rgba","hsl","hsla"],e.cutHex=i,e.hexToRGB=function(t){var e=i(t),r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),s=parseInt(e.substring(6,8),16)/255;return isNaN(s)&&(s=1),[r,n,o,s]},e.hex3to6=function(t){var e=t.charAt(1),r=t.charAt(2),i=t.charAt(3);return["#",e,e,r,r,i,i].join("")},e.hslToRGB=function(t){var e=t[0],r=t[1],i=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var n,o=(1-Math.abs(2*i-1))*r,s=o*(1-Math.abs(e/60%2-1)),a=i-o/2;e<60?n=[o,s,0]:e<120?n=[s,o,0]:e<180?n=[0,o,s]:e<240?n=[0,s,o]:e<300?n=[s,0,o]:e<360&&(n=[o,0,s]);var u=[Math.round(255*(n[0]+a)),Math.round(255*(n[1]+a)),Math.round(255*(n[2]+a))];return t.length>3&&(u[3]=t[3]),u}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(6),n=r(8);var o=function(){function t(){this.times=[],this.items={},this.names={}}return t.prototype.getNames=function(){return function t(e,r){var n=[];for(var o in e)r.push(o),i.isObject(e[o])?n=n.concat(t(e[o],r)):n.push(r.slice()),r.pop();return n}(this.names,[])},t.prototype.hasName=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.isInProperties(this.names,t,!0)},t.prototype.update=function(){var t=this.items;for(var e in t)this.updateFrame(t[e]);return this},t.prototype.forEach=function(t){var e=this.times,r=this.items;e.forEach(function(e){t(r[e],e,r)})},t.prototype.updateFrame=function(t){if(!t)return this;var e=t.properties;return function t(e,r){for(var o in r){var s=r[o];!i.isObject(s)||i.isArray(s)||s instanceof n.default?e[o]=!0:(i.isObject(e[o])||(e[o]={}),t(e[o],r[o]))}}(this.names,e),this},t.prototype.getDuration=function(){var t=this.times;return 0===t.length?0:t[t.length-1]},t.prototype.setDuration=function(t,e){void 0===e&&(e=this.getDuration());var r=t/e,i=this.times,n=this.items,o={};this.times=i.map(function(t){var e=t*r;return o[e]=n[t],e}),this.items=o},t.prototype.unshift=function(t){var e=this.times,r=this.items,n={};return this.times=e.map(function(e){var o=i.toFixed(t+e);return n[o]=r[e],o}),this.items=n,this},t.prototype.size=function(){return this.times.length},t.prototype.add=function(t,e){return this.items[t]=e,this.addTime(t),this},t.prototype.has=function(t){return t in this.items},t.prototype.get=function(t){return this.items[t]},t.prototype.remove=function(t){return delete this.items[t],this.removeTime(t),this},t.prototype.addTime=function(t){for(var e=this.times,r=e.length,i=r,n=0;n<r;++n){if(t===e[n])return this;if(t<e[n]){i=n;break}}return this.times.splice(i,0,t),this},t.prototype.removeTime=function(t){var e=this.times.indexOf(t);return e>-1&&this.times.splice(e,1),this},t}();e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var i=r(6),n=r(8),o=r(6);function s(t,e,r,n){if(0===n)return e;if(!i.isArray(e))return t;var o=e.length;return t.map(function(t,i){return i>=o?t:f(t,e[i],r,n)})}function a(t,e,r,i){if(0===i)return e;var o=t.value,a=e.value,u=t.getOption("model");if(u!==e.getOption("model"))return f(t.toValue(),e.toValue(),r,i);3===o.length&&(o[3]=1),3===a.length&&(a[3]=1);for(var p=s(o,a,r,i),c=u,h=0;h<3;++h)p[h]=parseInt(p[h],10);return new n.default(p,{type:"color",model:c,prefix:c+"(",suffix:")"})}function u(t,e,r,i){var o=t.getOption("type");if("color"===o)return a(t,e,r,i);var u=s(t.value,e.value,r,i);return new n.default(u,{type:o,separator:t.getOption("separator")||e.getOption("separator"),prefix:t.getOption("prefix")||e.getOption("prefix"),suffix:t.getOption("suffix")||e.getOption("suffix"),model:t.getOption("model")||e.getOption("model")})}function f(t,e,r,n){if(0===n)return e;if(0===r||r+n===0)return t;var a=o.getType(t);if(a!==o.getType(e))return t;if("property"===a)return u(t,e,r,n);if("array"===a)return s(t,e,r,n);if("value"!==a)return t;var f,p=r/(r+n),c=1-p,h=i.splitUnit(""+t),l=i.splitUnit(""+e);if(isNaN(h.value)||isNaN(l.value))return t;f=h.value*c+l.value*p;var d=h.prefix||l.prefix,v=h.unit||l.unit;return d||v?d+f+v:f}e.dotArray=s,e.dotColor=a,e.dotObject=u,e.dot=f,e.dotValue=function(t,e,r,i,n,o){if(t===e)return i;if(t===r)return n;if(!o)return f(i,n,t-e,r-t);var s=o((t-e)/(r-e));return f(i,n,s,1-s)}},function(t,e,r){"use strict";e.__esModule=!0,e.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},e.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},e.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}},e.fromCSS=function(t,e){if(!t||!e||!e.length)return{};var r;if(t instanceof Element)r=t;else{if(!t.length)return{};r=t[0]}for(var i={},n=window.getComputedStyle(r),o=e.length,s=0;s<o;++s)i[e[s]]=n[e[s]];return i}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(17);e.blink=i.default;var n=r(19);e.fadeIn=n.default;var o=r(20);e.fadeOut=o.default;var s=r(21);e.wipeIn=s.default;var a=r(22);e.wipeOut=a.default;var u=r(23);e.zoomIn=u.default;var f=r(24);e.zoomOut=f.default;var p=r(18);e.set=p.default;var c=r(25);e.transition=c.default},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return i.default("opacity",[r,o,r],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(1);e.default=function(t,e,r){for(var n=new i.SceneItem({},r),o=e.length,s=0;s<o;++s)n.set(s/(o-1)*100+"%",t,e[s]);return n}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return i.default("opacity",[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?1:e,n=t.to,o=void 0===n?0:n;return i.default("opacity",[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?"-100%":e,n=t.to,o=void 0===n?"0%":n,s=t.property,a=void 0===s?"left":s;return i.default(a,[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?"0%":e,n=t.to,o=void 0===n?"100%":n,s=t.property,a=void 0===s?"left":s;return i.default(a,[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return i.default(["transform","scale"],[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(18);e.default=function(t){var e=t.from,r=void 0===e?1:e,n=t.to,o=void 0===n?0:n;return i.default(["transform","scale"],[r,o],arguments[0])}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){var i,n,o=r.from,s=r.to,a=r.duration,u=void 0===a?t.getDuration():a,f=r.time,p=void 0===f?Math.max(t.getDuration()-u,0):f;t.set(((i={})[p]=o,i[p+u]=s,i)),e.set(((n={0:s})[u]=o,n))}}])});