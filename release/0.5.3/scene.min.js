!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Scene",[],t):"object"==typeof exports?exports.Scene=t():e.Scene=t()}(window,function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},__webpack_require__.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){"use strict";var n=_interopRequireDefault(r(1)),i=_interopRequireDefault(r(16)),o=_interopRequireDefault(r(18)),a=r(19),u=r(9),s=_interopRequireDefault(r(6)),f=_interopRequireDefault(r(3));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}n.default.EASE=u.EASE,n.default.EASE_IN=u.EASE_IN,n.default.EASE_OUT=u.EASE_OUT,n.default.EASE_IN_OUT=u.EASE_IN_OUT,n.default.cubicBezier=s.default,n.default.SceneItem=i.default,n.default.Frame=o.default,n.default.Animator=f.default,n.default.TRANSFORM=a.TRANSFORM,n.default.FILTER=a.FILTER,n.default.ANIMATION=a.ANIMATION,n.default.KEYFRAMES=a.KEYFRAMES,e.exports=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=_interopRequireDefault(r(2)),o=_interopRequireDefault(r(16)),a=r(9);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function Scene(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Scene),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Scene.__proto__||Object.getPrototypeOf(Scene)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Scene,i.default),n(Scene,[{key:"newItem",value:function(e,t){if(this.items[e])return this.items[e];var r=new o.default;return this.setItem(e,r),r.setOptions(t),r}},{key:"setSelector",value:function(e){for(var t in e){var r=e[t],n=this.getItem(r);n&&n.setSelector(t)}return this}},{key:"load",value:function(e,t){if(function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0}(Scene.prototype.__proto__||Object.getPrototypeOf(Scene.prototype),"load",this).call(this,e,t),!this.options.selector)return this;var r=void 0,n=void 0;for(r in e)"options"!==r&&(n=this.getItem(r))&&n.setSelector(r);return this}},{key:"exportCSS",value:function(){var e=this.items,t=this.getDuration();for(var r in t&&isFinite(t)||(t=0),e){e[r].exportCSS(t,this.state)}return this}},{key:"playCSS",value:function(){this.exportCSS();var e=this.items;for(var t in e)e[t].playCSS(!1);return this}}]),Scene}();a.SCENE_ROLES.transform=!0,a.SCENE_ROLES.filter=!0,t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=_interopRequireDefault(r(3)),o=_interopRequireDefault(r(7)),a=r(5);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function Scene(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Scene);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Scene.__proto__||Object.getPrototypeOf(Scene)).call(this));return r.items={},r.load(e,t),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Scene,i.default),n(Scene,null,[{key:"addRole",value:function(e){o.default.addRole(e)}}]),n(Scene,[{key:"getDuration",value:function(){var e=this.items,t=0;for(var r in e){var n=e[r];t=Math.max(t,n.getTotalDuration()/n.state.playSpeed)}return t}},{key:"setDuration",value:function(e){var t=this.items,r=this.getDuration();if(!isFinite(r))return this;var n=e/r;for(var i in t){var o=t[i];o.setDelay(o.getDelay()*n),o.setDuration(o.getActiveDuration()*n)}return this}},{key:"getItem",value:function(e){return this.items[e]}},{key:"newItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,a.has)(this.items,e))return this.items[e];var r=new o.default;return this.setItem(e,r),r.setOptions(t),r}},{key:"setItem",value:function(e,t){return t.setId(e),this.items[e]=t,this}},{key:"setIterationTime",value:function(e){(function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0})(Scene.prototype.__proto__||Object.getPrototypeOf(Scene.prototype),"setIterationTime",this).call(this,e);var t=this.getIterationTime(),r=this.items,n=this.state.easing;for(var i in r){var o=r[i];o.setTime(t*o.state.playSpeed,n)}return this}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.options;for(var r in e){if("options"!==r)this.newItem(r).load(e[r])}return this.setOptions(t),this}},{key:"forEach",value:function(e){var t=this.items;for(var r in t)e(t[r],r,t)}}]),Scene}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=_interopRequireDefault(r(4)),o=_interopRequireDefault(r(6));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=0,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var t=Date.now(),r=Math.max(0,16-(t-a)),n=window.setTimeout(function(){e(t+r)},1e3/60);return a=t+r,n},s=function(e){function Animator(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Animator);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Animator.__proto__||Object.getPrototypeOf(Animator)).call(this));return t._timer=0,t.options={},t.state={easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:"normal",playSpeed:1,currentTime:0,currentIterationTime:-1,currentIterationCount:0,prevTime:0,playState:"paused",duration:0},t.setOptions(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Animator,i.default),n(Animator,[{key:"setEasing",value:function(e){Array.isArray(e)?(this.state.easingName="cubic-bezier("+e.join(" ,")+")",this.state.easing=o.default.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))):(this.state.easing=e,this.state.easingName=e.easingName||"linear")}},{key:"getEasingName",value:function(){return this.state.easingName}},{key:"getEasing",value:function(){return this.state.easing}},{key:"setOptions",value:function(e){if(!e)return this;for(var t in e)"easing"!==t?"duration"!==t?(t in this.state?this.state:this.options)[t]=e[t]:this.setDuration(e[t]):this.setEasing(e[t]);return this}},{key:"setFillMode",value:function(e){this.state.fillMode=e}},{key:"setDirection",value:function(e){this.state.direction=e}},{key:"setDelay",value:function(e){this.state.delay=e}},{key:"setIterationCount",value:function(e){this.state.iterationCount=e}},{key:"setPlaySpeed",value:function(e){this.state.playSpeed=e}},{key:"setDuration",value:function(e){this.state.duration=e}},{key:"getDuration",value:function(){return this.state.duration}},{key:"getDelay",value:function(e){return this.state.delay}},{key:"getIterationCount",value:function(){return this.state.iterationCount}},{key:"getFillMode",value:function(){return this.state.fillMode}},{key:"getDirection",value:function(){return this.state.direction}},{key:"getTotalDuration",value:function(){return"infinite"===this.state.iterationCount?1/0:this.state.delay+this.getActiveDuration()}},{key:"getActiveDuration",value:function(){return"infinite"===this.state.iterationCount?1/0:this.getDuration()*this.state.iterationCount}},{key:"isEnded",value:function(){return 0===this.getTime()&&"paused"===this.state.playState||!(this.getTime()<this.getTotalDuration())}},{key:"isPaused",value:function(){return"paused"===this.state.playState}},{key:"setNext",value:function(e){return this.on("ended",function(){e.play()}),this}},{key:"play",value:function(){var e=this;return this.isEnded()&&this.setTime(0),this.state.playState="running",u(function(t){e.state.prevTime=t,e.tick(t)}),this.trigger("play"),this}},{key:"pause",value:function(){return this.state.playState="paused",this.trigger("paused"),this}},{key:"end",value:function(){this.pause(),this.trigger("ended")}},{key:"reset",value:function(){return this.setTime(0),this.pause(),this}},{key:"setTime",value:function(e){var t=this.getTotalDuration(),r=e;r<0?r=0:r>t&&(r=t),this.state.currentTime=r,this.calculateIterationTime(),this.trigger("timeupdate",{currentTime:r,time:this.getIterationTime(),iterationCount:this.getIterationCount()})}},{key:"getTime",value:function(){return this.state.currentTime}},{key:"getActiveTime",value:function(){return parseInt(1e4*Math.max(this.state.currentTime-this.state.delay,0),10)/1e4}},{key:"calculateIterationTime",value:function(){var e=this.state,t=e.iterationCount,r=e.fillMode,n=e.direction,i=this.getDuration(),o=this.getActiveTime(),a=0===i?0:o/i,u=a%2>=1,s=o%i,f=!1;switch(this.state.currentIterationCount=a,n){case"reverse":s=i-s;break;case"alternate":u&&(s=i-s),f=!0;break;case"alternate-reverse":u||(s=i-s),f=!0}switch(r){case"both":case"forwards":if(f||a!==t||t%1!=0)break;s=i-s;break;default:if(a!==t||t%1!=0)break;s=0}this.setIterationTime(s)}},{key:"caculateEasing",value:function(e){if(!this.state.easing)return e;var t=this.getDuration();return(0,this.state.easing)(0===t?0:e/t)*e}},{key:"getIterationTime",value:function(){return this.state.currentIterationTime}},{key:"setIterationTime",value:function(e){var t=e;return this.state.currentIterationTime=t,this}},{key:"tick",value:function(e){var t=this,r=this.state.playSpeed,n=this.state.prevTime,i=this.getTime()+Math.min(1e3,e*r-n)/1e3;this.state.prevTime=e*r,this.setTime(i),this.isEnded()&&this.end(),"paused"!==this.state.playState&&u(function(e){t.tick(e)})}}]),Animator}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(5);var o=function(){function EventTrigger(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventTrigger),this._events={}}return n(EventTrigger,[{key:"on",value:function(e,t){var r=this._events,n=void 0,o=void 0;if((0,i.isObject)(e)){for(n in e)this.on(n,e[n]);return this}if((0,i.has)(r,e)||(r[e]=[]),(0,i.isObject)(t)){for(o in t)this.on(e,t[o]);return this}return r[e].push(t),this}},{key:"off",value:function(e,t){if(e)if(t){var r=this._events[e];if(!r)return this;var n=r.indexOf(t);-1!==n&&r.splice(n,1)}else this._events[e]=[];else this._events={};return this}},{key:"hasOn",value:function(e){var t=this._events[e];return t&&t.length}},{key:"trigger",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=this._events;return(0,i.has)(a,e)?(a[e].forEach(function(e){e.apply(t,n)}),this):this}}]),EventTrigger}();o.defaultEvents={},t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+t;return e?function(){return this[e][r]}:function(){return this[r]}},o=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+t;return e?function(t){return this[e][r]=t,this}:function(e){return this[r]=e,this}},a=(t.isPercent=function(e){return~e.search(/([0-9]|\.|-|e-|e\+)+%/g)},t.isUndefined=function(e){return void 0===e},t.isObject=function(e){return"object"===(void 0===e?"undefined":n(e))},t.isArray=function(e){return Array.isArray(e)},t.isString=function(e){return"string"==typeof e},t.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.splitUnit=function(e){var t=""+e;try{var r=t.match(/([0-9]|\.|-|e-|e\+)+/g,"")[0];return{unit:t.replace(r,"")||"",value:r=parseFloat(r)}}catch(e){return{unit:t}}},t.camelize=function(e){return e.replace(/[\s-_]([a-z])/g,function(e,t){return t.toUpperCase()})},t.defineProperty=function(e,t,r){Object.defineProperty(e,t,r)});t.defineGetter=function(e){var t=e.target,r=e.name,n=e.parent,o=e.prefix;a(t,r,{get:i(n,r,o)})},t.defineSetter=function(e){var t=e.target,r=e.name,n=e.parent,i=e.prefix;a(t,r,{set:o(n,r,i)})},t.defineGetterSetter=function(e){var t=e.target,r=e.name,n=e.parent,u=e.prefix;a(t,r,{get:i(n,r,u),set:o(n,r,u)})},t.fill=function(e,t){for(var r=e.length,n=0;n<r;++n)e[n]=t;return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){function cubic(e,t,r){var n=1-r;return r*r*r+3*r*r*n*t+3*r*n*n*e}var i=function(i){var o=i;return o>=1?o=1:o<=0&&(o=0),o=function(t){for(var n=t,i=1;Math.abs(i)>.001;){if(i=cubic(e,r,n)-t,Math.abs(i)<.001)return n;n-=i/2}return n}(o),cubic(t,n,o)};return i.easingName="cubic-bezier("+e+", "+t+", "+r+", "+n+")",i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0};t.getDefaultData=getDefaultData;var o=_interopRequireDefault(r(3)),a=_interopRequireDefault(r(8)),u=r(5),s=_interopRequireDefault(r(11)),f=_interopRequireDefault(r(13)),l=r(15),c=r(9);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getDefaultData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.type,n=e.size,i=e.separator;return r===c.TYPE_PROPERTY_OBJECT?new s.default((0,u.fill)(new Array(n),t),i):r===c.TYPE_ARRAY?(0,u.fill)(new Array(n),t):t}var p=function(e){function SceneItem(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SceneItem);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SceneItem.__proto__||Object.getPrototypeOf(SceneItem)).call(this));return r.timeline=new f.default,r.load(e,t),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SceneItem,o.default),n(SceneItem,[{key:"getDuration",value:function(){return Math.max(this.state.duration,this.timeline.getLastTime())}},{key:"setDuration",value:function(e){var t=e/this.getDuration(),r=this.timeline,n=r.times,o=r.items,a={};r.times=n.map(function(e){var r=e*t;return a[r]=o[e],r}),r.items=a,i(SceneItem.prototype.__proto__||Object.getPrototypeOf(SceneItem.prototype),"setDuration",this).call(this,e)}},{key:"setId",value:function(e){this.options.id=e}},{key:"set",value:function(e,t,r,n){var i=this;if((0,u.isArray)(e))return e.forEach(function(e){i.set(e,t,r,n)}),this;if((0,u.isObject)(e))return this.load(e),this;var o=this.getFrame(e)||this.newFrame(e);return o.set(t,r,n),this.updateFrame(o),this}},{key:"get",value:function(e,t,r){var n=this.getFrame(e);return n&&n.get(t,r)}},{key:"remove",value:function(e,t,r){var n=this.getFrame(e);return n&&n.remove(t,r),this}},{key:"animate",value:function(e,t){var r=this.getIterationTime(),n=this.getEasing()||t,i=this.getNowFrame(r,n);return i?(this.trigger("animate",{frame:i,time:r,currentTime:this.getTime()}),i):i}},{key:"setTime",value:function(e,t){return i(SceneItem.prototype.__proto__||Object.getPrototypeOf(SceneItem.prototype),"setTime",this).call(this,e),this.animate(e,t),this}},{key:"update",value:function(){return this.timeline.update(),this}},{key:"updateFrame",value:function(e){return this.timeline.updateFrame(e),this}},{key:"newFrame",value:function(e){var t=this.getFrame(e);return t||(t=new a.default,(0,u.isUndefined)(e)||this.setFrame(e,t),t)}},{key:"setFrame",value:function(e,t){return this.timeline.add(e,t),this}},{key:"_getTime",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).duration||this.getDuration()||100;if((0,u.isString)(e)){if((0,u.isPercent)(e))return!this.state.duration&&(this.state.duration=t),parseFloat(e)/100*t;if("from"===e)return 0;if("to"===e)return t}return parseFloat(e)}},{key:"getFrame",value:function(e){return this.timeline.get(this._getTime(e))}},{key:"hasFrame",value:function(e){return this.timeline.has(e)}},{key:"removeFrame",value:function(e){var t=this.timeline;return t.remove(e),t.update(),this}},{key:"copyFrame",value:function(e,t){var r=void 0;if((0,u.isObject)(e)){for(r in e)this.copyFrame(r,e[r]);return this}var n=this.getFrame(e);if(!n)return this;var i=n.clone();return this.setFrame(t,i),this}},{key:"mergeFrame",value:function(e,t){var r=void 0;if((0,u.isObject)(e)){for(r in e)this.mergeFrame(r,e[r]);return this}var n=this.getFrame(e);return n?(this.newFrame(t).merge(n),this):this}},{key:"getNowValue",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.timeline.size(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.state.easing,a=this.timeline,s=a.times,f=s.length,c=void 0,p=void 0,h=s[n],v=s[i];if(!(r<h)){for(var d=n;d>=0&&(h=s[d],!(c=a.get(h)).has(e,t));--d);for(var y=i;y<f&&(v=s[y],!(p=a.get(v)).has(e,t));++y);var m=c.get(e,t);if(!(0,u.isUndefined)(m)){if(!p)return m;var _=p.get(e,t);if((0,u.isUndefined)(_)||m===_)return m;h<0&&(h=0);var g=s[n],b=s[i],O=this.state.easing||o;return(0,l.dotValue)({time:r,prevTime:h,nextTime:v,startTime:g,endTime:b,prevValue:m,nextValue:_,easing:O})}}}},{key:"getNearIndex",value:function(e){var t=this.timeline,r=t.times,n=t.getLastTime(),i=t.size();if(0!==i){var o=parseInt(n>0?e*i/n:0,10),a=i-1,u=0;if(o<0?o=0:o>a&&(o=a),e<r[a])for(;u<a;){if((u===o||a===o)&&u+1===a){e<r[u]&&(a=u);break}if(r[o]>e)a=o;else{if(!(r[o]<e)){u=a=o;break}u=o}o=parseInt((u+a)/2,10)}else u=o=a;return{left:u,right:a}}}},{key:"getFillFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.newFrame(),r=this.timeline.names,n=t.properties;for(var i in n){var o=r[i];if(o)for(var a in o)t.set(i,a,getDefaultData(o[a],e))}return t}},{key:"_getNowFrame",value:function(e,t){var r=this.timeline.getLastTime(),n=this.state.duration,i=this.getNowFrame(r),o=this.getFrame(0)||this.getFillFrame(0),a=this.newFrame(),u=this.timeline.names;for(var s in u){var f=u[s];for(var c in f){var p=o.get(s,c);void 0===p&&(p=getDefaultData(f[c],0)),a.set(s,c,(0,l.dotValue)({time:e,prevTime:r,nextTime:n,easing:t,prevValue:i.get(s,c),nextValue:p}))}}return a}},{key:"getNowFrame",value:function(e,t){if(this.timeline.getLastTime()<e&&e<=this.state.duration)return this._getNowFrame(e,t);var r=this.getNearIndex(e);if(!r)return r;var n=r.left,i=r.right,o=this.newFrame(),a=this.timeline.names;for(var s in a){var f=a[s];for(var l in f){var c=this.getNowValue(s,l,e,n,i,t);(0,u.isUndefined)(c)||o.set(s,l,c)}}return o}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.options;if(this.setOptions(t),(0,u.isArray)(e)){for(var r=e.length,n=0;n<r;++n){var i=1===r?0:this._getTime(n/(r-1)*100+"%",t);this.set(i,e[n])}return this}for(var o in e)if("options"!==o){var a=e[o],s=this._getTime(o);"number"!=typeof a?this.set(s,e[o]):this.mergeFrame(a,s)}return this}}]),SceneItem}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(9),a=r(5),u=r(10),s=r(11),f=(n=s)&&n.__esModule?n:{default:n};function isPropertyObject(e){return e instanceof f.default}function clone(e){return _merge({},e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function _merge(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var n in t){var i=t[n];(0,a.isObject)(i)?i instanceof f.default?e[n]=r?i.toValue():i.clone():(0,a.isArray)(i)?e[n]=i.slice():!(0,a.isObject)(e[n])||e[n]instanceof f.default?e[n]=clone(i,r):_merge(e[n],i,r):e[n]=t[n]}return e}var l=function(){function Frame(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Frame);var t=void 0;for(t in this.properties={},o.SCENE_ROLES)this.properties[t]={};this.load(e)}return i(Frame,[{key:"load",value:function(e){if(e&&!(0,a.isObject)(e))return this;var t=void 0,r=void 0;for(r in e)t=e[r],(0,a.has)(o.SCENE_ROLES,r)?this.set(r,t):!(0,a.isObject)(t)||(0,a.isArray)(t)||isPropertyObject(t)?this._set(o.PROPERTY,r,t):this.set(r,t);return this}},{key:"get",value:function(e,t){return t?this.properties[e]&&this.properties[e][t]:e in o.SCENE_ROLES?this.properties[e]:this.properties[o.PROPERTY][e]}},{key:"remove",value:function(e,t){return t?delete this.properties[e][t]:e in o.SCENE_ROLES?delete this.properties[e]:delete this.properties[o.PROPERTY][e],this}},{key:"_set",value:function(e,t,r){var n=e.trim();n in this.properties||(this.properties[n]={}),this.properties[n][t]=(0,a.isString)(r)?(0,u.toPropertyObject)(r):r}},{key:"set",value:function(e,t,r){var n=this,i=void 0;if((0,a.isObject)(e))return this.load(e),this;if(!t){for(var o=e.split(";"),s=o.length,f=0;f<s;++f){var l=/([^:]*):([\S\s]*)/g.exec(o[f]);!l||l.length<3||!l[1]||this.set(l[1].trim(),l[2])}return this}if((0,a.isObject)(t)){for(i in t)this._set(e,i,t[i]);return this}if((0,a.isUndefined)(r)){if((0,a.isString)(t)){var c=(0,u.splitSpace)(t).map(function(e){return(0,u.toPropertyObject)(e)});if(c.every(function(e){return e.model&&"color"!==e.type}))return c.forEach(function(t){var r=t.model;t.model="",t.prefix="",t.suffix="",n._set(e,r,t)}),this}return this._set("property",e,t),this}return this._set(e,t,r),this}},{key:"has",value:function(e,t){return this.properties[e]&&(0,a.has)(this.properties[e],t)}},{key:"clone",value:function(){var e=new Frame;return e.merge(this),e}},{key:"merge",value:function(e){var t=this.properties,r=e.properties;return r?(_merge(t,r),this):this}},{key:"toObject",value:function(){return clone(this.properties,!0)}}]),Frame}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_TEXT=t.TYPE_ARRAY=t.TYPE_PROPERTY_OBJECT=t.EASE_IN_OUT=t.EASE_OUT=t.EASE_IN=t.EASE=t.PLAY_DIRECTION=t.FILL_MODE=t.ANIMATION_PLAY_STATE=t.SCENE_ROLES=t.PROPERTY=t.PREFIX=void 0;var n,i=r(6),o=(n=i)&&n.__esModule?n:{default:n};t.PREFIX="__SCENEJS_";var a=t.PROPERTY="property";t.SCENE_ROLES=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},a,!0),t.ANIMATION_PLAY_STATE=["idle","pending","paused","running","finished"],t.FILL_MODE=["none","forwards","backwards","both","auto"],t.PLAY_DIRECTION=["normal","reverse","alternate","alternate-reverse"],t.EASE=(0,o.default)(.25,.1,.25,1),t.EASE_IN=(0,o.default)(.42,0,1,1),t.EASE_OUT=(0,o.default)(0,0,.58,1),t.EASE_IN_OUT=(0,o.default)(.42,0,.58,1),t.TYPE_PROPERTY_OBJECT="propertyobject",t.TYPE_ARRAY="array",t.TYPE_TEXT="text"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToColorObject=t.toPropertyObject=t.arrayToPropertyObject=t.toBracketObject=t.toColorObject=t.arrayToColorObject=t.splitComma=t.splitSpace=void 0;var n,i=r(11),o=(n=i)&&n.__esModule?n:{default:n},a=r(12),u=r(5);var s=void 0,f=void 0,l=t.splitSpace=function(e){for(var t=e.split(/("[^"]*"|'[^']*'|[^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\s+/g),r=t.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=t[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},c=t.splitComma=function(e){for(var t=e.split(/("[^"]*"|'[^']*'|[^,\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^,\s()]*)|\s*,\s*/g),r=t.length,n=[],i=void 0,o=void 0,a=0,s=0;s<r;++s)i=t[s],(0,u.isUndefined)(i)?n[a]&&++a:i&&(o=n[a],n[a]=o?o+i:i);return n},p=t.arrayToColorObject=function(e){return e instanceof o.default?(e.type="color",e.model="rgba",e.prefix="rgba(",e):(3===e.length&&(e[3]=1),new o.default(e,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"}))},h=t.toColorObject=function(e){var t=void 0;if(e instanceof o.default)t=e;else{if(!(0,u.isObject)(e))return(0,u.isString)(e)?f(e):e;t=p(e)}var r=t.value,n=r.length;4===n?r[3]=parseFloat(r[3]):3===n&&(r[3]=1),t.type="color";var i=t.model.toLowerCase(),s=void 0;switch("rgb"===i&&p(t),i){case"rgb":case"rgba":for(s=0;s<3;++s)r[s]=parseInt(r[s],10);break;case"hsl":case"hsla":for(s=1;s<3;++s)-1!==r[s].indexOf("%")&&(r[s]=parseFloat(r[s])/100);return r=(0,a.hslToRGB)(r),p(r)}return t},v=t.toBracketObject=function(e){var t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(e);if(!t||t.length<4)return e;var r=t[1]||"",n=r+"(",i=t[2],a=")"+t[3],u=c(i),f=void 0,l=",";return 1===u.length&&((f=s(i)).prefix||f.suffix||(l=f.separator,f=f.value)),f||(f=u.map(function(e){return s(e)})),new o.default(f,{separator:l,model:r,prefix:n,suffix:a})},d=t.arrayToPropertyObject=function(e){return new o.default(e,{type:"array"})};t.stringToColorObject=f=function(e){var t=0,r=0;if("#"===e.charAt(0))return t=4===e.length?(0,a.hexToRGB)((0,a.hex3to6)(e)):(e.length,(0,a.hexToRGB)(e)),p(t);if(-1===e.indexOf("("))throw new Error("Invalid Format : Not a Color - "+e);return r=v(e),h(r)},t.toPropertyObject=s=function(e){if(!(0,u.isString)(e))return Array.isArray(e)?d(e):e;var t=c(e),r=void 0;if(t.length>1)return(r=new o.default(t.map(function(e){return s(e)}),",")).type="array",r;if((t=l(e)).length>1)return(r=new o.default(t.map(function(e){return s(e)})," ")).type="array",r;if((r=e.charAt(0))&&('"'===r||"'"===r))return e;if(-1!==e.indexOf("(")){if(r=v(e),!(0,u.isObject)(r))return r;var n=r.model.toLowerCase();if(-1!==a.COLOR_MODELS.indexOf(n))return h(r);for(var i=r.length,f=0;f<i;++f)r.set(f,s(r.get(f)));return r}return 0===e.indexOf("#")?h(e):e},t.toPropertyObject=s,t.stringToColorObject=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(5);var o=function(){function PropertyObject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PropertyObject),this.prefix="",this.suffix="",this.model="",this.type="",this.separator=",",this.init(e,t)}return n(PropertyObject,[{key:"init",value:function(e,t){var r=void 0;if((0,i.isObject)(t))for(r in t)this[r]=t[r];else this.separator=t;(0,i.isString)(e)?this.value=e.split(this.separator):(0,i.isObject)(e)?this.value=e:this.value=[e]}},{key:"size",value:function(){return this.value.length}},{key:"get",value:function(e){return this.value[e]}},{key:"set",value:function(e,t){return this.value[e]=t,this}},{key:"clone",value:function(){return new PropertyObject(this.value.map(function(e){return e instanceof PropertyObject?e.clone():e}),{separator:this.separator,prefix:this.prefix,suffix:this.suffix,model:this.model,type:this.type})}},{key:"toValue",value:function(){return this.prefix+this.join()+this.suffix}},{key:"join",value:function(){var e=this.separator;return this.value.map(function(e){return e instanceof PropertyObject?e.toValue():e}).join(e)}},{key:"forEach",value:function(e){return this.value.forEach(e),this}},{key:"multiply",value:function(e){for(var t=this.value,r=t.length,n=0;n<r;++n)t[n]instanceof PropertyObject?t[n].multiply(e):t[n]*=e;return this}}]),PropertyObject}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COLOR_MODELS=["rgb","rgba","hsl","hsla"];var n=t.cutHex=function(e){return"#"===e.charAt(0)?e.substring(1,9):e};t.hexToRGB=function(e){var t=n(e),r=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16),a=parseInt(t.substring(6,8),16)/255;return isNaN(a)&&(a=1),[r,i,o,a]},t.hex3to6=function(e){var t=e.charAt(1),r=e.charAt(2),n=e.charAt(3);return["#",t,t,r,r,n,n].join("")},t.hslToRGB=function(e){var t=e[0],r=e[1],n=e[2];t<0&&(t+=360*parseInt((Math.abs(t)+360)/360,10)),t%=360;var i=(1-Math.abs(2*n-1))*r,o=i*(1-Math.abs(t/60%2-1)),a=n-i/2,u=void 0;t<60?u=[i,o,0]:t<120?u=[o,i,0]:t<180?u=[0,i,o]:t<240?u=[0,o,i]:t<300?u=[o,0,i]:t<360&&(u=[i,0,o]);var s=[Math.round(255*(u[0]+a)),Math.round(255*(u[1]+a)),Math.round(255*(u[2]+a))];return e.length>3&&(s[3]=e[3]),s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=_interopRequireDefault(r(11)),o=_interopRequireDefault(r(14)),a=r(9);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getType(e){return e instanceof i.default?a.TYPE_PROPERTY_OBJECT:Array.isArray(e)?a.TYPE_ARRAY:a.TYPE_TEXT}var u=function(e){function FrameTimeline(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FrameTimeline);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(FrameTimeline.__proto__||Object.getPrototypeOf(FrameTimeline)).call(this));return e.names={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(FrameTimeline,o.default),n(FrameTimeline,[{key:"update",value:function(){var e=this.items;for(var t in e)this.updateFrame(e[t]);return this}},{key:"updateFrame",value:function(e){if(!e)return this;var t=e.properties,r=this.names;for(var n in t){r[n]=r[n]||{};var i=t[n];for(var o in i){var u=i[o],s=getType(u),f=s===a.TYPE_PROPERTY_OBJECT&&u.size()||s===a.TYPE_ARRAY&&u.length||0,l=s===a.TYPE_PROPERTY_OBJECT&&u.separator||"";r[n][o]={type:s,size:f,separator:l}}}return this}}]),FrameTimeline}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=r(5);var o=function(){function Timeline(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Timeline),this.times=[],this.items={}}return n(Timeline,[{key:"getLastTime",value:function(){var e=this.times;return 0===e.length?0:e[e.length-1]}},{key:"size",value:function(){return this.times.length}},{key:"add",value:function(e,t){return this.items[e]=t,this.addTime(e),this}},{key:"addTime",value:function(e){var t=this.times,r=t.length,n=r,i=void 0;for(i=0;i<r;++i){if(e===t[i])return this;if(e<t[i]){n=i;break}}return this.times.splice(n,0,e),this}},{key:"has",value:function(e){return(0,i.has)(this.items,e)}},{key:"get",value:function(e){return this.items[e]}},{key:"remove",value:function(e){return delete this.items[e],this.removeTime(e),this}},{key:"removeTime",value:function(e){var t=this.times.indexOf(e);return-1===t?this:(this.times.splice(t,1),this)}}]),Timeline}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dot=t.dotValue=t.dotObject=t.dotColor=t.dotArray=void 0;var n,i=r(5),o=r(11),a=(n=o)&&n.__esModule?n:{default:n},u=r(10);var s=void 0,f=t.dotArray=function(e,t,r,n){if(0===n)return t;if(!(0,i.isArray)(t))return e;var o=t.length;return e.map(function(e,i){return i>=o?e:s(e,t[i],r,n)})},l=t.dotColor=function(e,t,r,n){var i=e,o=t;i instanceof a.default||(i=(0,u.toColorObject)(i)),o instanceof a.default||(o=(0,u.toColorObject)(o));var l=i.value,c=o.value,p=i.model;if(p!==o.model)return s(i.toValue(),o.toValue(),r,n);3===l.length&&(l[3]=1),3===c.length&&(c[3]=1);for(var h=f(l,c,r,n),v=p,d=0;d<3;++d)h[d]=parseInt(h[d],10);return new a.default(h,{type:"color",model:v,prefix:v+"(",suffix:")"})},c=t.dotObject=function(e,t,r,n){var o=e.type;if("color"===o)return l(e,t,r,n);var u=e.value,s=t.value;if(!(0,i.isObject)(t))return e;var c=f(u,s,r,n);return new a.default(c,{type:o,separator:e.separator||t.separator,prefix:e.prefix||t.prefix,suffix:e.suffix||t.suffix,model:e.model||t.model})};t.dot=s=function(e,t,r,n){if(e instanceof a.default)return c(e,t,r,n);if((0,i.isArray)(e))return f(e,t,r,n);if(r+n===0)return e;var o=(0,i.splitUnit)(e),u=(0,i.splitUnit)(t),s=r/(r+n),l=1-s,p=void 0;if(isNaN(o.value)||isNaN(u.value))return s>=1?t:e;p=o.value*l+u.value*s;var h=o.unit||u.unit||!1;return!1===h?p:p+h.trim()};t.dotValue=function(e){var t=e.time,r=e.prevTime,n=e.nextTime,i=e.startTime,o=void 0===i?r:i,a=e.endTime,u=void 0===a?n:a,f=e.prevValue,l=e.nextValue,c=e.easing;if(!c||o===u)return s(f,l,t-r,n-t);var p=s(f,l,o-r,n-o),h=s(f,l,u-r,n-u),v=c((t-o)/(u-o));return s(p,h,v,1-v)};t.dot=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),i=function get(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0},o=_interopRequireDefault(r(7)),a=r(9),u=r(17),s=_interopRequireDefault(r(18)),f=r(19);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function makeId(){for(;;){var e=""+parseInt(1e5*Math.random(),10);if(!document.querySelector('[data-scene-id="'+e+'"]'))return e}}var l=function(e){function SceneItem(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SceneItem),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(SceneItem.__proto__||Object.getPrototypeOf(SceneItem)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SceneItem,o.default),n(SceneItem,[{key:"newFrame",value:function(e){var t=this.getFrame(e);return t||(t=new s.default,void 0!==e&&this.setFrame(e,t),t)}},{key:"setId",value:function(e){var t=this._elements;i(SceneItem.prototype.__proto__||Object.getPrototypeOf(SceneItem.prototype),"setId",this).call(this,e);var r=(0,u.toId)(this.options.id);if(this.options.selector||(this.options.selector='[data-scene-id="'+r+'"]'),!t)return this;var n=t.length;if(!n)return this;for(var o=0;o<n;++o)t[o].setAttribute("data-scene-id",r);return this}},{key:"animate",value:function(e,t){var r=i(SceneItem.prototype.__proto__||Object.getPrototypeOf(SceneItem.prototype),"animate",this).call(this,e,t),n=this._elements;if(!n||!n.length)return r;var o=r.toCSS();if(this.state.cssText===o)return r;this.state.cssText=o;for(var a=n.length,u=0;u<a;++u)n[u].style.cssText+=o;return r}},{key:"setSelector",value:function(e){return this.options.selector=!0===e?this.options.id:e||'[data-scene-id="'+this.options.id+'"]',this.setElement(document.querySelectorAll(e)),this}},{key:"setElement",value:function(e){if(!e)return this;if("string"==typeof e)return this.setSelector(e);var t=this.id;return this._elements=e instanceof Element?[e]:e,this.setId(t&&"null"!==t?t:makeId()),this}},{key:"setCSS",value:function(e,t){if(!t||!t.length)return this;var r=this._elements;if(!r||!r.length)return this;for(var n={},i=window.getComputedStyle(r[0]),o=t.length,a=0;a<o;++a)n[t[a]]=i[t[a]];return this.set(e,n),this}},{key:"setOptions",value:function(e){i(SceneItem.prototype.__proto__||Object.getPrototypeOf(SceneItem.prototype),"setOptions",this).call(this,e);var t=e&&e.selector,r=this.options.elements||this.options.element;return t||r?(r&&this.setElement(r),!0===t?this.setSelector(this.options.id):this.setSelector(t),this):this}},{key:"_toKeyframes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),r=this.options.id||this.setId(makeId()).options.id;if(!r)return"";var n=this.getDuration(),i=this.timeline.times,o=this.state.playSpeed,s=i.map(function(r){var n=e.getNowFrame(r,!1);return r/o/t*100+"%{"+n.toCSS()+"}"});return n!==t&&s.push("100%{"+this.getNowFrame(n,!1).toCSS()+"}"),"@"+f.KEYFRAMES+" "+a.PREFIX+"KEYFRAMES_"+(0,u.toId)(r)+"{\n\t\t\t"+s.join("\n")+"\n\t\t}"}},{key:"toCSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.options.id||this.setId(makeId()).options.id;if(!r)return"";var n=0===e,i=this.options.selector,o=t.playSpeed||1,s=((t.delay||0)+this.state.delay)/o,l=!n&&t.easing&&t.easingName||this.state.easingName,c=!n&&t.iterationCount||this.state.iterationCount,p="forwards"!==t.fillMode&&t.fillMode||this.state.fillMode,h="none"!==t.direction&&t.direction||this.state.direction,v=[];return v.push(f.ANIMATION+"-name: "+a.PREFIX+"KEYFRAMES_"+(0,u.toId)(r)+";"),v.push(f.ANIMATION+"-duration: "+e/o+"s;"),v.push(f.ANIMATION+"-delay: "+s+"s;"),v.push(f.ANIMATION+"-timing-function: "+l+";"),v.push(f.ANIMATION+"-fill-mode: "+p+";"),v.push(f.ANIMATION+"-direction: "+h+";"),v.push(f.ANIMATION+"-iteration-count: "+c+";"),i+".startAnimation {\n\t\t\t"+v.join("")+"\n\t\t}\n\t\t"+this._toKeyframes(e,t)}},{key:"exportCSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDuration(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,u.toId)(this.options.id||this.setId(makeId()).options.id||"");if(r){var n=document.querySelector("#"+a.PREFIX+r),i=this.toCSS(e,t);n?n.innerText=i:document.body.insertAdjacentHTML("beforeend",'<style id="'+a.PREFIX+"STYLE_"+r+'">'+i+"</style>")}}},{key:"playCSS",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!f.ANIMATION)return this;e&&this.exportCSS();var t=this._elements;if(!t||!t.length)return this;for(var r=t.length,n=0;n<r;++n)t[n].className+=" startAnimation";return this}}]),SceneItem}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.convertCrossBrowserCSSObject=function(e,t,r){return r?(e[t]=r,e["-moz-"+t]=r,e["-ms-"+t]=r,e["-o-"+t]=r,e["-webkit-"+t]=r,e):e},t.convertCrossBrowserCSSArray=function(e,t,r){return r?(e.push(t+": "+r+";","-moz-"+t+": "+r+";","-ms-"+t+": "+r+";","-o-"+t+": "+r+";","-webkit-"+t+": "+r+";"),e):e},t.toId=function(e){return e.match(/[0-9a-zA-Z]+/g).join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),o=r(8),a=(n=o)&&n.__esModule?n:{default:n},u=r(19);function toInnerProperties(e){if(!e)return"";var t=[];for(var r in e)t.push(r+"("+e[r]+")");return t.join(" ")}var s=function(e){function Frame(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Frame),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Frame.__proto__||Object.getPrototypeOf(Frame)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Frame,a.default),i(Frame,[{key:"toCSSObject",value:function(){var e=this.toObject(),t={},r=e.property;for(var n in r)t[n]=r[n];var i=toInnerProperties(e.transform),o=toInnerProperties(e.filter);return u.TRANSFORM&&i&&(t[u.TRANSFORM]=i),u.FILTER&&o&&(t[u.FILTER]=o),t}},{key:"toCSS",value:function(){var e=this.toCSSObject(),t=[];for(var r in e)t.push(r+":"+e[r]+";");return t.join("")}}]),Frame}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var r=(document.body||document.documentElement).style,n=e.length;if(void 0!==r[t])return t;for(var i=0;i<n;++i){var o="-"+e[i]+"-"+t;if(void 0!==r[o])return o}return""},i=(t.TRANSFORM=n(["webkit","ms","moz","o"],"transform"),t.FILTER=n(["webkit","ms","moz","o"],"filter"),t.ANIMATION=n(["webkit","ms","moz","o"],"animation"));t.KEYFRAMES=i.replace("animation","keyframes")}])});