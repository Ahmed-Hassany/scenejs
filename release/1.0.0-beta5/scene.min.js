/*!
 * Copyright (c) 2018 Daybrush
 * license: MIT
 * author: Daybrush
 * repository: https://github.com/daybrush/scenejs.git
 * @version 1.0.0-beta5
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Scene",[],e):"object"==typeof exports?exports.Scene=e():t.Scene=e()}(window,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=25)}([function(t,e,i){"use strict";e.__esModule=!0;var r=i(1);e.default=r.default;var n=i(8);e.SceneItem=n.default;var o=i(9);e.Frame=o.default;var s=i(12);e.Keyframes=s.default;var a=i(7);e.PropertyObject=a.default;var u=i(5);e.easing=u;var f=i(2);e.Animator=f.default;var p=i(15);e.presets=p,e.VERSION="#__VERSION__#";var c=i(6);e.setRole=c.setRole,e.setAlias=c.setAlias},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.__esModule=!0;var o=i(2),s=i(8),a=i(3),u=i(6),f=function(t){function e(e,i){var r=t.call(this)||this;return r.items={},r.load(e,i),r}return n(e,t),e.prototype.setId=function(t){return void 0===t&&(t="scene"+Math.floor(1e5*Math.random())),this.state.id=t,this},e.prototype.getId=function(){return this.state.id},e.prototype.getDuration=function(){var t=this.items,e=0;for(var i in t){var r=t[i];e=Math.max(e,r.getTotalDuration()/r.getPlaySpeed())}return e},e.prototype.setDuration=function(t){var e=this.items,i=this.getDuration();if(0===t||!isFinite(i))return this;if(0===i)for(var r in e){(o=e[r]).setDuration(t)}else{var n=t/i;for(var r in e){var o;(o=e[r]).setDelay(o.getDelay()*n),o.setDuration(o.getDuration()*n)}}return this},e.prototype.getItem=function(t){return this.items[t]},e.prototype.newItem=function(t,e){if(void 0===e&&(e={}),u.has(this.items,t))return this.items[t];var i=new s.default;return this.setItem(t,i),i.setOptions(e),i},e.prototype.setItem=function(t,e){return e instanceof o.default&&e.setId(t),this.items[t]=e,this},e.prototype.animate=function(e,i){return t.prototype.setTime.call(this,e,!0),this._animate(i)},e.prototype.setTime=function(e,i,r){return t.prototype.setTime.call(this,e,i),this._animate(r),this},e.prototype.forEach=function(t){var e=this.items;for(var i in e)t(e[i],i,e);return this},e.prototype.exportCSS=function(t,e){void 0===t&&(t=this.getDuration());var i=this.items,r=t;for(var n in r&&isFinite(r)||(r=0),i){i[n].exportCSS(r,this.state)}return this},e.prototype.append=function(t){t.setDelay(t.getDelay()+this.getDuration()),this.setItem(t.getId()||t.setId().getId(),t)},e.prototype.playCSS=function(t,e){var i=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!a.ANIMATION||"running"===this.getPlayState())return this;t&&this.exportCSS();var r,n=this.items;for(var o in n){var s=n[o];s.playCSS(!1,e),s.getState("playCSS")&&(r=s)}if(!r)return this;var u=function(t){var e=t.currentTime,r=t.iterationCount;i.state.currentTime=e,i.setCurrentIterationCount(r)},f=function(){i.end(),i.setState({playCSS:!1}),r.off("ended",f),r.off("iteration",u)};return r.on("ended",f),r.on("iteration",u),this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play"),this},e.prototype.load=function(t,i){void 0===t&&(t={}),void 0===i&&(i=t.options);var r=i&&i.selector;for(var n in t)if("options"!==n){var o=t[n],a=void 0;o instanceof e||o instanceof s.default?(this.setItem(n,o),a=o):(a=this.newItem(n)).load(o),r&&a.setSelector(n)}this.setOptions(i)},e.prototype.setSelector=function(t){var e=this.options.selector;this.forEach(function(t,i){t.setSelector(!!e&&i)})},e.prototype._animate=function(t){var e=this.getIterationTime(),i=this.items,r=this.getEasing()||t,n={};for(var o in i){var s=i[o];n[o]=s.animate(Math.max(e*s.getPlaySpeed()-s.getDelay(),0),r)}return this.trigger("animate",{currentTime:this.getTime(),time:e,frames:n}),n},e}(o.default);e.default=f},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.__esModule=!0;var o=i(3),s=i(4),a=i(5),u=i(6),f=0,p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var e=Date.now(),i=Math.max(0,16-(e-f)),r=window.setTimeout(function(){t(e+i)},1e3/60);return f=e+i,r};function c(t,e){return"reverse"===e||e===(t%2>=1?"alternate":"alternate-reverse")}e.isDirectionReverse=c;var h=function(t){function e(e){var i=t.call(this)||this;return i.options={},i.state={id:"",easing:0,easingName:"linear",iterationCount:1,delay:0,fillMode:"forwards",direction:"normal",playSpeed:1,currentTime:0,currentIterationTime:-1,currentIterationCount:0,tickTime:0,prevTime:0,playState:"paused",duration:0},i.setOptions(e),i}return n(e,t),e.prototype.setEasing=function(t){return this.setState(Array.isArray(t)?{easingName:"cubic-bezier("+t.join(",")+")",easing:a.bezier(t[0],t[1],t[2],t[3])}:{easing:t,easingName:t.easingName||"linear"}),this},e.prototype.setOptions=function(t){if(!t)return this;for(var e in t){var i=t[e];"easing"!==e?"duration"!==e?(e in this.state?this.state:this.options)[e]=i:i&&this.setDuration(i):this.setEasing(i)}return this},e.prototype.getTotalDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.state.delay+this.getActiveDuration()},e.prototype.getActiveDuration=function(){return"infinite"===this.state.iterationCount?1/0:this.getDuration()*this.state.iterationCount},e.prototype.isEnded=function(){return 0===this.state.tickTime&&"paused"===this.state.playState||!(this.getTime()<this.getActiveDuration())},e.prototype.isPaused=function(){return"paused"===this.state.playState},e.prototype.setNext=function(t){return this.on("ended",function(){t.play()}),this},e.prototype.play=function(){var t=this;return this.state.playState="running",this.isEnded()&&this.setTickTime(0),this.state.tickTime=this.getTime(),p(function(e){t.state.prevTime=e,t.tick(e)}),this.trigger("play"),this},e.prototype.pause=function(){return this.state.playState="paused",this.trigger("paused"),this},e.prototype.end=function(){return this.pause(),this.trigger("ended"),this},e.prototype.reset=function(){return this.state.tickTime=0,this.setTime(0),this.pause(),this},e.prototype.setTime=function(t,e){var i=this.getActiveDuration(),r=e?t:this.getUnitTime(t);return this.state.tickTime=this.state.delay+r,r<0?r=0:r>i&&(r=i),this.state.currentTime=r,this.calculateIterationTime(),this.isDelay()?this:(this.trigger("timeupdate",{currentTime:r,time:this.getIterationTime(),iterationCount:this.getIterationCount()}),this)},e.prototype.getState=function(t){return this.state[t]},e.prototype.setState=function(t){for(var e in t)this.state[e]=t[e];return this},e.prototype.getTime=function(){return this.state.currentTime},e.prototype.getUnitTime=function(t){if(u.isString(t)){var e=this.getDuration()||100;if("from"===t)return 0;if("to"===t)return e;var i=u.splitUnit(t),r=i.unit,n=i.value;return"%"===r?(!this.getDuration()&&(this.state.duration=e),parseFloat(t)/100*e):">"===r?n+o.THRESHOLD:n}return u.toFixed(t)},e.prototype.getIterationTime=function(){return this.state.currentIterationTime},e.prototype.getDelay=function(){return this.state.delay},e.prototype.setDelay=function(t){return this.state.delay=t,this},e.prototype.isDelay=function(){var t=this.state,e=t.delay,i=t.tickTime;return e>0&&i<e},e.prototype.getFillMode=function(){return this.state.fillMode},e.prototype.setFillMode=function(t){return this.state.fillMode=t,this},e.prototype.getIterationCount=function(){return this.state.iterationCount},e.prototype.setIterationCount=function(t){return this.state.iterationCount=t,this},e.prototype.getDirection=function(){return this.state.direction},e.prototype.setDirection=function(t){return this.state.direction=t,this},e.prototype.getPlayState=function(){return this.state.playState},e.prototype.setPlayState=function(t){return this.state.playState=t,this},e.prototype.getPlaySpeed=function(){return this.state.playSpeed},e.prototype.setPlaySpeed=function(t){return this.state.playSpeed=t,this},e.prototype.getDuration=function(){return this.state.duration},e.prototype.setDuration=function(t){return this.state.duration=t,this},e.prototype.getEasing=function(){return this.state.easing},e.prototype.getEasingName=function(){return this.state.easingName},e.prototype.setCurrentIterationCount=function(t){var e=this.state,i=Math.floor(t);return e.currentIterationCount<i&&this.trigger("iteration",{currentTime:e.currentTime,iterationCount:i}),e.currentIterationCount=t,this},e.prototype.setIterationTime=function(t){return this.state.currentIterationTime=t,this},e.prototype.calculateIterationTime=function(){var t=this.state,e=t.iterationCount,i=t.fillMode,r=t.direction,n=this.getDuration(),o=this.getTime(),s=0===n?0:o/n,a=n?o%n:0;if(!n)return this.setIterationTime(0),this;this.setCurrentIterationCount(s);var u=c(s,r);(u&&(a=n-a),"infinite"!==e)&&(s>=e&&(a=n*("both"===i||"forwards"===i?e%1||1:0),u&&(a=n-a)));return this.setIterationTime(a),this},e.prototype.caculateEasing=function(t){if(!this.state.easing)return t;var e=this.getDuration();return(0,this.state.easing)(0===e?0:t/e)*t},e.prototype.tick=function(t){var e=this,i=this.state,r=i.playSpeed,n=i.prevTime,o=this.state.tickTime+Math.min(1e3,t-n)/1e3*r;i.prevTime=t,this.setTickTime(o),this.isEnded()?this.end():"paused"!==i.playState&&p(function(t){e.tick(t)})},e.prototype.setTickTime=function(t){this.setTime(t-this.state.delay,!0)},e}(s.default);e.default=h},function(t,e,i){"use strict";e.__esModule=!0,e.PREFIX="__SCENEJS_",e.timingFunction="animation-timing-function",e.ROLES={transform:{},filter:{},attribute:{}},e.ALIAS={easing:["animation-timing-function"]},e.FIXED={"animation-timing-function":!0,contents:!0},e.MAXIMUM=1e6,e.THRESHOLD=1e-6;var r=["webkit","ms","moz","o"],n=function(t){var e=(document.body||document.documentElement).style,i=r.length;if(void 0!==e[t])return t;for(var n=0;n<i;++n){var o="-"+r[n]+"-"+t;if(void 0!==e[o])return o}return""};e.TRANSFORM=n("transform"),e.FILTER=n("filter"),e.ANIMATION=n("animation"),e.KEYFRAMES=e.ANIMATION.replace("animation","keyframes"),e.START_ANIMATION="startAnimation"},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var i=this,r=this.events;if("object"==typeof t){for(var n in t)this.on(n,t[n]);return this}return t in r||(r[t]=[]),e?"object"==typeof e?(e.forEach(function(e){return i.on(t,e)}),this):(r[t].push(e),this):this},t.prototype.off=function(t,e){if(t)if(e){var i=this.events[t];if(!i)return this;var r=i.indexOf(e);-1!==r&&i.splice(r,1)}else this.events[t]=[];else this.events={};return this},t.prototype.trigger=function(t){for(var e=this,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=this.events;if(!(t in n))return this;var o=n[t];if(i.length){var s=i[0];s.type=t,s.currentTarget=this,!s.target&&(s.target=this)}return o.forEach(function(t){t.apply(e,i)}),this},t}();e.default=r},function(t,e,i){"use strict";function r(t,e,i){var r=1-i;return i*i*i+3*i*i*r*e+3*i*r*r*t}function n(t,e,i,n){var o=function(o){var s=function(t,e,i){for(var n=i,o=1;Math.abs(o)>.001;){if(o=r(t,e,n)-i,Math.abs(o)<.001)return n;n-=o/2}return n}(t,i,Math.max(Math.min(1,o),0));return r(e,n,s)};return o.easingName="cubic-bezier("+t+", "+e+", "+i+", "+n+")",o}e.__esModule=!0,e.bezier=n,e.LINEAR=n(0,0,1,1),e.EASE=n(.25,.1,.25,1),e.EASE_IN=n(.42,0,1,1),e.EASE_OUT=n(0,0,.58,1),e.EASE_IN_OUT=n(.42,0,.58,1)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(3),n=i(7);function o(t,e,i){var r=e.length,n=t;if(0===r)return!1;for(var o=0;o<r;++o){if(!0===n)return!1;if(!(n=n[e[o]])||!i&&!0===n)return!1}return!0}function s(t){return Array.isArray(t)}e.setAlias=function(t,e){r.ALIAS[t]=e},e.setRole=function(t,e,i){for(var n=t.length,o=r.ROLES,s=r.FIXED,a=0;a<n-1;++a)!o[t[a]]&&(o[t[a]]={}),o=o[t[a]],i&&(!s[t[a]]&&(s[t[a]]={}),s=s[t[a]]);i&&(s[t[n-1]]=!0),o[t[n-1]]=!!e||{}},e.getType=function(t){var e=typeof t;if("object"===e){if(s(t))return"array";if(t instanceof n.default)return"property"}else if("string"===e||"number"===e)return"value";return e},e.toFixed=function(t){return Math.round(t*r.MAXIMUM)/r.MAXIMUM},e.isInProperties=o,e.isRole=function(t,e){return o(r.ROLES,t,e)},e.isFixed=function(t){return o(r.FIXED,t,!0)},e.isUndefined=function(t){return void 0===t},e.isObject=function(t){return t&&"object"==typeof t},e.isArray=s,e.isString=function(t){return"string"==typeof t},e.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.splitUnit=function(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],r=e[2];return{prefix:i,unit:e[3],value:parseFloat(r)}},e.decamelize=function(t){return t.replace(/([a-z])([A-Z])/g,function(t,e,i){return e+"-"+i.toLowerCase()})}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){void 0===e&&(e={}),this.options={prefix:"",suffix:"",model:"",type:"",separator:","},this.setOptions(e),this.init(t)}return t.prototype.setOptions=function(t){return Object.assign(this.options,t),this},t.prototype.getOption=function(t){return this.options[t]},t.prototype.size=function(){return this.value.length},t.prototype.get=function(t){return this.value[t]},t.prototype.set=function(t,e){return this.value[t]=e,this},t.prototype.clone=function(){return new t(this.value.map(function(e){return e instanceof t?e.clone():e}),{separator:this.options.separator,prefix:this.options.prefix,suffix:this.options.suffix,model:this.options.model,type:this.options.type})},t.prototype.toValue=function(){return this.options.prefix+this.join()+this.options.suffix},t.prototype.join=function(){return this.value.map(function(e){return e instanceof t?e.toValue():e}).join(this.options.separator)},t.prototype.forEach=function(t){return this.value.forEach(t),this},t.prototype.init=function(t){var e=typeof t;return this.value="string"===e?t.split(this.options.separator):"object"===e?t:[t],this},t}();e.default=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});e.__esModule=!0;var o=i(2),s=i(9),a=i(6),u=i(12),f=i(13),p=i(3),c=i(14);function h(t){return t.match(/[0-9a-zA-Z]+/g).join("")}function l(t){var e=[];for(var i in t)e.push(p.ANIMATION+"-"+a.decamelize(i)+" : "+t[i]+";");return e.join("")}var d=function(t){function e(e,i){var r=t.call(this)||this;return r.keyframes=new u.default,r.elements=[],r.load(e,i),r}return n(e,t),e.prototype.getDuration=function(){return Math.max(this.state.duration,this.keyframes.getDuration())},e.prototype.setDuration=function(e){if(0===e)return this;var i=this.getDuration();return i>0&&this.keyframes.setDuration(e,i),t.prototype.setDuration.call(this,a.toFixed(e)),this},e.prototype.setId=function(t){var e=this.elements,i=e.length;this.setState({id:t||function(t){for(;;){var e=""+Math.floor(1e5*Math.random());if(!t)return e;if(!document.querySelector('[data-scene-id="'+e+'"]'))return e}}(!!i)});var r=h(this.getId());if(this.options.selector||(this.options.selector='[data-scene-id="'+r+'"]'),!i)return this;for(var n=0;n<i;++n)e[n].setAttribute("data-scene-id",r);return this},e.prototype.getId=function(){return this.state.id},e.prototype.set=function(t){for(var i=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(a.isObject(t))return this.load(t),this;if(r[0]){if(r[0]instanceof e){var o=r[0],s=o.getDelay(),u=this.getUnitTime(t)+s,f=o.getAllTimes(!!s||!this.hasFrame(t)),p=f.keys,c=f.values,h=f.frames,l=this.getEasingName()!==o.getEasingName()?o.getEasing():0;return p.forEach(function(t){i.set(u+t,h[c[t]])}),l&&(this.set(u+p[0],"easing",l),this.set(u+p[p.length-1],"easing","initial")),this}if(1===r.length&&a.isArray(r[0]))return r[0].forEach(function(e){i.set(t,e)}),this}var d=this.newFrame(t);return d.set.apply(d,r),this.updateFrame(d),this},e.prototype.get=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=this.getFrame(t);return r&&r.get.apply(r,e)},e.prototype.remove=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=this.getFrame(t);return r&&r.remove.apply(r,e),this.update(),this},e.prototype.append=function(t){return this.set(this.getDuration(),t),this},e.prototype.prepend=function(t){if(t instanceof e){var i=t.getDelay(),r=("infinite"===t.getIterationCount()?t.getDuration():t.getActiveDuration())+i,n=this.keyframes.get(0);n&&this.keyframes.remove(0),this.keyframes.unshift(r),this.set(0,t),this.set(r+p.THRESHOLD,n)}else this.prepend(new e(t));return this},e.prototype.setSelector=function(t){return this.options.selector=!0===t?this.state.id:t||'[data-scene-id="'+this.state.id+'"]',this.setElement(document.querySelectorAll(this.options.selector)),this},e.prototype.setElement=function(t){return t?(this.elements=t instanceof Element?[t]:t,this.setId(),this):this},e.prototype.setCSS=function(t,e){return this.set(t,c.fromCSS(this.elements,e)),this},e.prototype.animate=function(e,i){return t.prototype.setTime.call(this,e,!0),this._animate(i)},e.prototype.setTime=function(e,i,r){return t.prototype.setTime.call(this,e,i),this._animate(r),this},e.prototype.update=function(){return this.keyframes.update(),this},e.prototype.updateFrame=function(t){return this.keyframes.updateFrame(t),this},e.prototype.newFrame=function(t){var e=this.getFrame(t);return e||(e=new s.default,this.setFrame(t,e),e)},e.prototype.setFrame=function(t,e){return this.keyframes.add(this.getUnitTime(t),e),this.keyframes.update(),this},e.prototype.getFrame=function(t){return this.keyframes.get(this.getUnitTime(t))},e.prototype.hasFrame=function(t){return this.keyframes.has(this.getUnitTime(t))},e.prototype.removeFrame=function(t){var e=this.keyframes;return e.remove(t),e.update(),this},e.prototype.copyFrame=function(t,e){if(a.isObject(t)){for(var i in t)this.copyFrame(i,t[i]);return this}var r=this.getFrame(t);if(!r)return this;var n=r.clone();return this.setFrame(e,n),this},e.prototype.mergeFrame=function(t,e){if(a.isObject(t)){for(var i in t)this.mergeFrame(i,t[i]);return this}var r=this.getFrame(t);return r?(this.newFrame(e).merge(r),this):this},e.prototype.getNowFrame=function(t,e){var i=this,r=new s.default,n=this.keyframes.getNames(),o=this._getNearTimeIndex(t),u=o.left,f=o.right,p=this._getEasing(t,u,f,this.state.easing||e);return n.forEach(function(e){var n=i._getNowValue(t,u,f,e,p);a.isUndefined(n)||r.set(e,n)}),r},e.prototype.load=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e=t.options),a.isArray(t))for(var i=t.length,r=0;r<i;++r){var n=1===i?0:this.getUnitTime(r/(i-1)*100+"%");this.set(n,t[r])}else if(t.keyframes)this.set(t.keyframes);else for(var n in t)if("options"!==n&&"keyframes"!==n){var o=t[n],s=this.getUnitTime(n);"number"!=typeof o?this.set(s,o):this.mergeFrame(o,s)}return e&&this.setOptions(e),this},e.prototype.clone=function(t){void 0===t&&(t={});var i=new e;return i.setOptions(this.state),i.setOptions(t),this.keyframes.forEach(function(t,e){return i.setFrame(e,t.clone())}),i},e.prototype.setOptions=function(e){void 0===e&&(e={}),t.prototype.setOptions.call(this,e);var i=e.id,r=e.selector,n=e.duration,o=e.elements;return n&&this.setDuration(n),i&&this.setId(i),o?this.setElement(o):r&&this.setSelector(!0===r?this.state.id:r),this},e.prototype.getAllTimes=function(t,e){void 0===t&&(t=!0),void 0===e&&(e={});var i=this.keyframes.times.slice(),r=i.length,n=[],s={};if(!r)return{keys:[],values:{},frames:{}};var u={},f=this.getDuration(),c=e.direction||this.state.direction,h="alternate"===c||"alternate-reverse"===c;!this.getFrame(0)&&i.unshift(0),!this.getFrame(f)&&i.push(f),r=i.length;for(var l=e.iterationCount||this.state.iterationCount,d=(l="infinite"!==l?l:1)*f,v=0;v<l;++v)for(var m=o.isDirectionReverse(v,c),y=v*f,g=0;g<r;++g)if(!h||0===v||0!==g){var S=0!==g||(0===v?t:h)?0:p.THRESHOLD,T=m?i[r-1-g]:i[g],_=a.toFixed(m?f-T:T),O=a.toFixed(y+_+S);if(d<O)break;if(n.push(O),s[O]=T,!u[T]){var I=this.getFrame(T);0===g||g===r-1||I.has("transform")||I.has("filter")?u[T]=this.getNowFrame(T):u[T]=I}}if(n[n.length-1]<d){m=o.isDirectionReverse(l,c),T=a.toFixed(f*(m?1-l%1:l%1));n.push(d),s[d]=T,!u[T]&&(u[T]=this.getNowFrame(T))}return{keys:n,values:s,frames:u}},e.prototype.toCSS=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var i=this.state,r=i.selector||this.options.selector;if(!r)return"";var n=this._getId(),o=0===t,s=e.playSpeed||1,a=((void 0===e.delay?i.delay:e.delay)||0)/s,u=!o&&e.easing&&e.easingName||i.easingName,f=!o&&e.iterationCount||i.iterationCount,c=l({fillMode:"forwards"!==e.fillMode&&e.fillMode||i.fillMode,direction:"normal"!==e.direction&&e.direction||i.direction,delay:a+"s",name:p.PREFIX+"KEYFRAMES_"+h(n),duration:t/s+"s",timingFunction:u,iterationCount:f});return r+"."+p.START_ANIMATION+" {\n\t\t\t"+c+"\n\t\t}\n\t\t"+this._toKeyframes(t,e)},e.prototype.exportCSS=function(t,e){if(void 0===t&&(t=this.getDuration()),void 0===e&&(e={}),this.elements.length){var i=this._getId(),r=document.querySelector("#"+p.PREFIX+i),n=this.toCSS(t,e);r?r.innerText=n:document.body.insertAdjacentHTML("beforeend",'<style id="'+p.PREFIX+"STYLE_"+i+'">'+n+"</style>")}},e.prototype.playCSS=function(t,e){var i=this;if(void 0===t&&(t=!0),void 0===e&&(e={}),!p.ANIMATION||"running"===this.getPlayState())return this;var r=this.elements,n=r.length;if(!n)return this;this.isEnded()&&this.setTime(0),t&&this.exportCSS();for(var o=l(e),s=0;s<n;++s){var a=r[s];a.style.cssText+=o,c.hasClass(a,p.START_ANIMATION)?(c.removeClass(a,p.START_ANIMATION),function(t){requestAnimationFrame(function(){requestAnimationFrame(function(){c.addClass(t,p.START_ANIMATION)})})}(a)):c.addClass(a,p.START_ANIMATION)}this.setState({playCSS:!0}),this.setPlayState("running"),this.trigger("play");var u=this.getDuration(),f=r[0],h=function(){i.end(),f&&(f.removeEventListener("animationend",h),f.removeEventListener("animationiteration",d))},d=function(t){var e=t.elapsedTime,r=e/u;i.state.currentTime=e,i.setCurrentIterationCount(r)};return f.addEventListener("animationend",h),f.addEventListener("animationiteration",d),this},e.prototype._getId=function(){return this.state.id||this.setId().getId()},e.prototype._getEasing=function(t,e,i,r){if(this.keyframes.hasName(p.timingFunction)){var n=this._getNowValue(t,e,i,[p.timingFunction],0,!0);return"function"==typeof n?n:r}return r},e.prototype._toKeyframes=function(t,e){void 0===t&&(t=this.getDuration()),void 0===e&&(e={});var i=this._getId(),r=this.state,n=r.playSpeed,o=void 0!==e.iterationCount,s=r.iterationCount,a=o?r.delay:0,u=o?r.direction:"normal",f=this.getAllTimes(!0,{duration:t,delay:a,direction:u,iterationCount:o&&"infinite"!==s?s:1,isCSS:!0}),c=f.keys,l=f.values,d=f.frames,v=c.length,m={},y=[];for(var g in d)m[g]=d[g].toCSS();if(!c.length)return"";a&&(y.push("0%{"+d[0]+"}"),"reverse"!==u&&"alternate-reverse"!==u||y.push(a/n/t*100-1e-5+"%{"+m[0]+"}")),c.forEach(function(e){y.push((a+e)/n/t*100+"%{"+m[l[e]]+"}")});var S=c[v-1];return(a+S)/n<t&&y.push("100%{"+m[l[S]]),"@"+p.KEYFRAMES+" "+p.PREFIX+"KEYFRAMES_"+h(i)+"{\n\t\t\t"+y.join("\n")+"\n\t\t}"},e.prototype._getNowValue=function(t,e,i,r,n,o){void 0===n&&(n=this.state.easing),void 0===o&&(o=a.isFixed(r));for(var s,u,p,c,h=this.keyframes,l=h.times,d=l.length,v=e;v>=0;--v){if((y=h.get(l[v])).has.apply(y,r)){s=l[v],p=y;break}}var m=p&&p.raw.apply(p,r);if(o)return m;for(v=i;v<d;++v){var y;if((y=h.get(l[v])).has.apply(y,r)){u=l[v],c=y;break}}var g=c&&c.raw.apply(c,r);return!p||a.isUndefined(m)?g:!c||a.isUndefined(g)||m===g?m:(s<0&&(s=0),f.dotValue(t,s,u,m,g,n))},e.prototype._getNearTimeIndex=function(t){for(var e=this.keyframes.times,i=e.length,r=0;r<i;++r){if(e[r]===t)return{left:r,right:r};if(e[r]>t)return{left:0===r?0:r-1,right:r}}return{left:i-1,right:i-1}},e.prototype._animate=function(t){var e=this.getIterationTime(),i=this.getEasing()||t,r=this.getNowFrame(e,i),n=this.getTime();this.trigger("animate",{frame:r,currentTime:n,time:e});var o=this.elements,s=o.length;if(!s)return r;var a=r.get("attribute");if(a)for(var u in a)for(var f=0;f<s;++f)o[f].setAttribute(u,a[u]);var p=r.toCSS();if(this.state.cssText!==p){this.state.cssText=p;for(f=0;f<s;++f)o[f].style.cssText+=p;return r}},e}(o.default);e.default=d},function(t,e,i){"use strict";e.__esModule=!0;var r=i(3),n=i(6),o=i(10),s=i(7);function a(t){if(!t)return"";var e=[];for(var i in t)e.push(i+"("+t[i]+")");return e.join(" ")}function u(t,e){return void 0===e&&(e=!1),f({},t,e)}function f(t,e,i){for(var r in void 0===i&&(i=!1),e){var o=e[r],a=n.getType(o);"property"===a?t[r]=i?o.toValue():o.clone():"array"===a?t[r]=o.slice():"object"===a?!n.isObject(t[r])||t[r]instanceof s.default?t[r]=u(o,i):f(t[r],o,i):t[r]=e[r]}return t}var p=function(){function t(t){void 0===t&&(t={}),this.properties={},this.set(t)}return t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.raw.apply(this,t),r=n.getType(i);return"property"===r?i.toValue():"object"===r?u(i,!0):i},t.prototype.raw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.properties,o=(t[0]in r.ALIAS?r.ALIAS[t[0]]:t),s=o.length,a=0;a<s;++a){if(!n.isObject(i))return;i=i[o[a]]}return i},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.properties,o=t[0]in r.ALIAS?r.ALIAS[t[0]]:t,s=o.length;if(!s)return this;for(var a=0;a<s-1;++a){if(!n.isObject(i))return this;i=i[o[a]]}return delete i[o[s-1]],this},t.prototype.set=function(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var u=i.length,f=i.slice(0,-1),p=i[u-1];if(f[0]in r.ALIAS)this._set(r.ALIAS[f[0]],p);else if(2===u&&n.isArray(f[0]))this._set(f[0],p);else if(n.isObject(p))if(n.isArray(p))this._set(f,p);else if(function(t){return t instanceof s.default}(p))n.isRole(f)?this.set.apply(this,f.concat([o.toObject(p)])):this._set(f,p);else if(p instanceof t)this.merge(p);else for(var c in p)this.set.apply(this,f.concat([c,p[c]]));else if(n.isString(p)){if(n.isRole(f)){var h=o.toPropertyObject(p);return n.isObject(h)&&this.set.apply(this,f.concat([h])),this}var l=o.splitStyle(p);if(l.forEach(function(t){e.set.apply(e,f.concat([t]))}),l.length)return this;this._set(f,p)}else this._set(f,p);return this},t.prototype.has=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.properties,o=t[0]in r.ALIAS?r.ALIAS[t[0]]:t,s=o.length;if(!s)return!1;for(var a=0;a<s;++a){if(!(n.isObject(i)&&o[a]in i))return!1;i=i[o[a]]}return!0},t.prototype.clone=function(){var e=new t;return e.merge(this),e},t.prototype.merge=function(t){var e=this.properties,i=t.properties;return i?(f(e,i),this):this},t.prototype.toObject=function(){return u(this.properties,!0)},t.prototype.toCSSObject=function(){var t=this.toObject(),e={};for(var i in t)if(!n.isRole([i],!0)){var o=t[i];i!==r.timingFunction?e[i]=o:e[r.timingFunction.replace("animation",r.ANIMATION)]=(n.isString(o)?o:o.easingName)||"initial"}var s=a(t.transform),u=a(t.filter);return r.TRANSFORM&&s&&(e[r.TRANSFORM]=s),r.FILTER&&u&&(e[r.FILTER]=u),e},t.prototype.toCSS=function(){var t=this.toCSSObject(),e=[];for(var i in t)e.push(i+":"+t[i]+";");return e.join("")},t.prototype._set=function(t,e){for(var i=this.properties,r=t.length,s=0;s<r-1;++s){var a=t[s];!(a in i)&&(i[a]={}),i=i[a]}r&&(i[t[r-1]]=n.isString(e)?o.toPropertyObject(e):e)},t}();e.default=p},function(t,e,i){"use strict";e.__esModule=!0;var r=i(7),n=i(11),o=i(6);function s(t){return t.match(/("[^"]*")|('[^']*')|([^\s()]*(?:\((?:[^()]*|\([^()]*\))*\))[^\s()]*)|\S+/g)||[]}function a(t){var e=t.match(/("[^"]*"|'[^']*'|[^,\s()]*\((?:[^()]*|\([^()]*\))*\)[^,\s()]*|[^,])+/g);return e?e.map(function(t){return t.trim()}):[]}function u(t){return 3===t.length&&(t[3]=1),new r.default(t,{model:"rgba",separator:",",type:"color",prefix:"rgba(",suffix:")"})}function f(t){var e;if(t instanceof r.default)e=t;else if(o.isArray(t))e=u(t);else if(o.isString(t))return h(t);var i=e.value,s=i.length;4===s?i[3]=parseFloat(i[3]):3===s&&(i[3]=1),e.setOptions({type:"color"});var a=e.getOption("model").toLowerCase();switch("rgb"===a&&e.setOptions({type:"color",model:"rgba",prefix:"rgba(",suffix:")"}),a){case"rgb":case"rgba":for(var f=0;f<3;++f)i[f]=parseInt(i[f],10);break;case"hsl":case"hsla":for(f=1;f<3;++f)-1!==i[f].indexOf("%")&&(i[f]=parseFloat(i[f])/100);return u(i=n.hslToRGB(i))}return e}function p(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);if(!e||e.length<4)return t;var i,o=e[1]||"",s=e[2],a=o+"(",u=")"+e[3],p=",",c=l(s);c instanceof r.default?(p=c.getOption("separator"),i=c.value,a+=c.getOption("prefix"),u=c.getOption("suffix")+u):i=[s];var h=new r.default(i,{separator:p,model:o,prefix:a,suffix:u});return-1!==n.COLOR_MODELS.indexOf(o)?f(h):h}function c(t,e){return new r.default(t,{type:"array",separator:e})}function h(t){if("#"===t.charAt(0))return u(4===t.length?n.hexToRGB(n.hex3to6(t)):n.hexToRGB(t));if(-1!==t.indexOf("("))return p(t);throw new Error("Invalid Format : Not a Color - "+t)}function l(t){if(!o.isString(t))return Array.isArray(t)?c(t,","):t;var e=a(t);return e.length>1?c(e.map(function(t){return l(t)}),","):(e=s(t)).length>1?c(e.map(function(t){return l(t)})," "):(e=/^(['"])([^'"]*)(['"])$/g.exec(t))&&e[1]===e[3]?new r.default([l(e[2])],{prefix:e[1],suffix:e[1]}):-1!==t.indexOf("(")?p(t):"#"===t.charAt(0)?h(t):t}e.splitSpace=s,e.splitComma=a,e.splitStyle=function(t){for(var e,i=t.split(";"),r=i.length,n=[],o=0;o<r;++o){var s=/([^:]*):([\S\s]*)/g.exec(i[o]);!s||s.length<3||!s[1]||n.push(((e={})[s[1].trim()]=l(s[2].trim()),e))}return n},e.arrayToColorObject=u,e.toColorObject=f,e.stringToBracketObject=p,e.arrayToPropertyObject=c,e.stringToColorObject=h,e.toPropertyObject=l,e.toObject=function t(e,i){void 0===i&&(i={});var r=e.getOption("model");if(r){e.setOptions({model:"",suffix:"",prefix:""});var n=e.size()>1?e:e.get(0);i[r]=n}else e.forEach(function(e){return t(e,i)});return i}},function(t,e,i){"use strict";function r(t){return"#"===t.charAt(0)?t.substring(1):t}e.__esModule=!0,e.COLOR_MODELS=["rgb","rgba","hsl","hsla"],e.cutHex=r,e.hexToRGB=function(t){var e=r(t),i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),s=parseInt(e.substring(6,8),16)/255;return isNaN(s)&&(s=1),[i,n,o,s]},e.hex3to6=function(t){var e=t.charAt(1),i=t.charAt(2),r=t.charAt(3);return["#",e,e,i,i,r,r].join("")},e.hslToRGB=function(t){var e=t[0],i=t[1],r=t[2];e<0&&(e+=360*Math.floor((Math.abs(e)+360)/360)),e%=360;var n,o=(1-Math.abs(2*r-1))*i,s=o*(1-Math.abs(e/60%2-1)),a=r-o/2;e<60?n=[o,s,0]:e<120?n=[s,o,0]:e<180?n=[0,o,s]:e<240?n=[0,s,o]:e<300?n=[s,0,o]:e<360&&(n=[o,0,s]);var u=[Math.round(255*(n[0]+a)),Math.round(255*(n[1]+a)),Math.round(255*(n[2]+a))];return t.length>3&&(u[3]=t[3]),u}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(6),n=i(7);var o=function(){function t(){this.times=[],this.items={},this.names={}}return t.prototype.getNames=function(){return function t(e,i){var n=[];for(var o in e)i.push(o),r.isObject(e[o])?n=n.concat(t(e[o],i)):n.push(i.slice()),i.pop();return n}(this.names,[])},t.prototype.hasName=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.isInProperties(this.names,t,!0)},t.prototype.update=function(){var t=this.items;for(var e in t)this.updateFrame(t[e]);return this},t.prototype.forEach=function(t){var e=this.times,i=this.items;e.forEach(function(e){t(i[e],e,i)})},t.prototype.updateFrame=function(t){if(!t)return this;var e=t.properties;return function t(e,i){for(var o in i){var s=i[o];!r.isObject(s)||r.isArray(s)||s instanceof n.default?e[o]=!0:(r.isObject(e[o])||(e[o]={}),t(e[o],i[o]))}}(this.names,e),this},t.prototype.getDuration=function(){var t=this.times;return 0===t.length?0:t[t.length-1]},t.prototype.setDuration=function(t,e){void 0===e&&(e=this.getDuration());var i=t/e,r=this.times,n=this.items,o={};this.times=r.map(function(t){var e=t*i;return o[e]=n[t],e}),this.items=o},t.prototype.unshift=function(t){var e=this.times,i=this.items,n={};return this.times=e.map(function(e){var o=r.toFixed(t+e);return n[o]=i[e],o}),this.items=n,this},t.prototype.size=function(){return this.times.length},t.prototype.add=function(t,e){return this.items[t]=e,this.addTime(t),this},t.prototype.has=function(t){return t in this.items},t.prototype.get=function(t){return this.items[t]},t.prototype.remove=function(t){return delete this.items[t],this.removeTime(t),this},t.prototype.addTime=function(t){for(var e=this.times,i=e.length,r=i,n=0;n<i;++n){if(t===e[n])return this;if(t<e[n]){r=n;break}}return this.times.splice(r,0,t),this},t.prototype.removeTime=function(t){var e=this.times.indexOf(t);return e>-1&&this.times.splice(e,1),this},t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=i(6),n=i(7),o=i(6);function s(t,e,i,n){if(0===n)return e;if(!r.isArray(e))return t;var o=e.length;return t.map(function(t,r){return r>=o?t:f(t,e[r],i,n)})}function a(t,e,i,r){if(0===r)return e;var o=t.value,a=e.value,u=t.getOption("model");if(u!==e.getOption("model"))return f(t.toValue(),e.toValue(),i,r);3===o.length&&(o[3]=1),3===a.length&&(a[3]=1);for(var p=s(o,a,i,r),c=u,h=0;h<3;++h)p[h]=parseInt(p[h],10);return new n.default(p,{type:"color",model:c,prefix:c+"(",suffix:")"})}function u(t,e,i,r){var o=t.getOption("type");if("color"===o)return a(t,e,i,r);var u=s(t.value,e.value,i,r);return new n.default(u,{type:o,separator:t.getOption("separator")||e.getOption("separator"),prefix:t.getOption("prefix")||e.getOption("prefix"),suffix:t.getOption("suffix")||e.getOption("suffix"),model:t.getOption("model")||e.getOption("model")})}function f(t,e,i,n){if(0===n)return e;if(0===i||i+n===0)return t;var a=o.getType(t);if(a!==o.getType(e))return t;if("property"===a)return u(t,e,i,n);if("array"===a)return s(t,e,i,n);if("value"!==a)return t;var f,p=i/(i+n),c=1-p,h=r.splitUnit(""+t),l=r.splitUnit(""+e);if(isNaN(h.value)||isNaN(l.value))return t;f=h.value*c+l.value*p;var d=h.prefix||l.prefix,v=h.unit||l.unit;return d||v?d+f+v:f}e.dotArray=s,e.dotColor=a,e.dotObject=u,e.dot=f,e.dotValue=function(t,e,i,r,n,o){if(t===e)return r;if(t===i)return n;if(!o)return f(r,n,t-e,i-t);var s=o((t-e)/(i-e));return f(r,n,s,1-s)}},function(t,e,i){"use strict";e.__esModule=!0,e.hasClass=function(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},e.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},e.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}},e.fromCSS=function(t,e){if(!t||!e||!e.length)return{};var i;if(t instanceof Element)i=t;else{if(!t.length)return{};i=t[0]}for(var r={},n=window.getComputedStyle(i),o=e.length,s=0;s<o;++s)r[e[s]]=n[e[s]];return r}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(16);e.blink=r.default;var n=i(18);e.fadeIn=n.default;var o=i(19);e.fadeOut=o.default;var s=i(20);e.wipeIn=s.default;var a=i(21);e.wipeOut=a.default;var u=i(22);e.zoomIn=u.default;var f=i(23);e.zoomOut=f.default;var p=i(17);e.set=p.default;var c=i(24);e.transition=c.default},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return r.default("opacity",[i,o,i],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0);e.default=function(t,e,i){for(var n=new r.SceneItem({},i),o=e.length,s=0;s<o;++s)n.set(s/(o-1)*100+"%",t,e[s]);return n}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return r.default("opacity",[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?1:e,n=t.to,o=void 0===n?0:n;return r.default("opacity",[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?"-100%":e,n=t.to,o=void 0===n?"0%":n,s=t.property,a=void 0===s?"left":s;return r.default(a,[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?"0%":e,n=t.to,o=void 0===n?"100%":n,s=t.property,a=void 0===s?"left":s;return r.default(a,[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?0:e,n=t.to,o=void 0===n?1:n;return r.default(["transform","scale"],[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(17);e.default=function(t){var e=t.from,i=void 0===e?1:e,n=t.to,o=void 0===n?0:n;return r.default(["transform","scale"],[i,o],arguments[0])}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r,n,o=i.from,s=i.to,a=i.duration,u=void 0===a?t.getDuration():a,f=i.time,p=void 0===f?Math.max(t.getDuration()-u,0):f;t.set(((r={})[p]=o,r[p+u]=s,r)),e.set(((n={0:s})[u]=o,n))}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0),n=r;for(var o in n)r.default[o]=n[o];t.exports=r.default}])});